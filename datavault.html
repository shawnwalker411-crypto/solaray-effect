<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://www.googletagmanager.com https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline'; img-src 'self' data: https://www.googletagmanager.com; font-src 'self'; connect-src 'self' https://api.web3forms.com https://api.blockchain.info https://api.coingecko.com https://www.google-analytics.com; media-src 'self'; frame-src 'none'; object-src 'none'; base-uri 'self'; form-action 'self' https://api.web3forms.com;">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <!-- Google tag (gtag.js) - Production only -->
  <script>
    (function () {
      var host = window.location.hostname;
      var isProd = (host === "solarayeffect.com" || host === "www.solarayeffect.com");
      if (!isProd) return;
      var s = document.createElement("script");
      s.async = true;
      s.src = "https://www.googletagmanager.com/gtag/js?id=G-M6F5T8Y2P6";
      document.head.appendChild(s);
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag("js", new Date());
      gtag("config", "G-M6F5T8Y2P6");
    })();
  </script>
  <title>Live Mining Stats &mdash; BTC, LTC, KAS Difficulty &amp; Hashrate</title>
  <meta name="description" content="Real-time mining data for Bitcoin, Litecoin, and Kaspa. Track network difficulty, hashrate, and crypto prices in one dashboard.">
  <meta name="keywords" content="bitcoin network difficulty, mining hashrate chart, crypto mining statistics, bitcoin difficulty history, mining data dashboard, litecoin hashrate, kaspa network stats">
  <meta name="author" content="Sola Ray Effect">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://www.solarayeffect.com/datavault.html">
  <meta property="og:title" content="Sola's Array | Data Vault">
  <meta property="og:description" content="Live cryptocurrency mining data vault with real-time network difficulty, hashrate charts, and mining statistics.">
  <meta property="og:url" content="https://www.solarayeffect.com/datavault.html">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://www.solarayeffect.com/assets/sola_hotpick_sun_optimized.jpg">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Sola's Array | Data Vault">
  <meta name="twitter:description" content="Live cryptocurrency mining data vault with real-time network difficulty, hashrate charts, and mining statistics.">
  <meta name="twitter:image" content="https://www.solarayeffect.com/assets/sola_hotpick_sun_optimized.jpg">
  <!-- Self-hosted fonts -->
  <style>
    @font-face { font-family: "Orbitron"; font-style: normal; font-weight: 400; font-display: swap; src: url("/fonts/orbitron-latin-400-normal.woff2") format("woff2"); }
    @font-face { font-family: "Orbitron"; font-style: normal; font-weight: 600; font-display: swap; src: url("/fonts/orbitron-latin-600-normal.woff2") format("woff2"); }
    @font-face { font-family: "Orbitron"; font-style: normal; font-weight: 700; font-display: swap; src: url("/fonts/orbitron-latin-700-normal.woff2") format("woff2"); }
    @font-face { font-family: "Orbitron"; font-style: normal; font-weight: 900; font-display: swap; src: url("/fonts/orbitron-latin-900-normal.woff2") format("woff2"); }
    @font-face { font-family: "Share Tech Mono"; font-style: normal; font-weight: 400; font-display: swap; src: url("/fonts/share-tech-mono-latin-400-normal.woff2") format("woff2"); }
    @font-face { font-family: "Rajdhani"; font-style: normal; font-weight: 400; font-display: swap; src: url("/fonts/rajdhani-latin-400-normal.woff2") format("woff2"); }
    @font-face { font-family: "Rajdhani"; font-style: normal; font-weight: 600; font-display: swap; src: url("/fonts/rajdhani-latin-600-normal.woff2") format("woff2"); }
    @font-face { font-family: "Rajdhani"; font-style: normal; font-weight: 700; font-display: swap; src: url("/fonts/rajdhani-latin-700-normal.woff2") format("woff2"); }
  </style>
  <style>
/* ============================================
   SOLA'S ARRAY &#x2014; DATA VAULT
   Scarif Aesthetic
   solarayeffect.com/datavault.html
   ============================================ */

/* --- CSS Variables --- */
:root {
  --vault-black: #0a0c0f;
  --vault-dark: #0d1117;
  --vault-panel: #131920;
  --vault-border: #1e2a38;
  --vault-blue: #1a3a5c;
  --vault-glow: #2d5a87;
  --terminal-green: #00ff88;
  --terminal-amber: #ffb800;
  --terminal-red: #ff3344;
  --terminal-cyan: #00d4ff;
  --scarif-sand: #c4a574;
  --text-primary: #e8f0f7;
  --text-muted: #8a9bab;
  --scanline-opacity: 0.03;
}

/* --- Reset --- */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Rajdhani', sans-serif;
  background-color: #0B2F26;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='600' height='600' viewBox='0 0 600 600'><rect width='600' height='600' fill='none'/><g stroke='%23D4AF37' stroke-width='2' fill='none' opacity='0.18' stroke-linecap='round' stroke-linejoin='round'><path d='M40 80 H210 V140 H360'/><path d='M120 220 H260 V180 H420 V240 H560'/><path d='M60 340 H220 V400 H360 V460 H520'/><path d='M300 40 V170 H460 V120 H560'/><path d='M40 520 H180 V460 H320 V540 H560'/><path d='M520 60 V200 H420 V320 H560'/><path d='M80 140 V260 H40'/><path d='M240 300 V520 H180'/></g><g fill='%23D4AF37' opacity='0.25'><circle cx='210' cy='140' r='4'/><circle cx='260' cy='180' r='4'/><circle cx='420' cy='240' r='4'/><circle cx='360' cy='460' r='4'/><circle cx='460' cy='120' r='4'/><circle cx='320' cy='540' r='4'/><circle cx='240' cy='520' r='4'/></g></svg>");
  background-repeat: repeat;
  background-position: 0 0;
  background-size: 600px 600px;
  color: var(--text-primary);
  min-height: 100vh;
  overflow-x: hidden;
}

/* ============================================
   HEADER
   ============================================ */
.vault-header {
  background: linear-gradient(180deg, var(--vault-panel) 0%, transparent 100%);
  border-bottom: 1px solid var(--vault-border);
  padding: 20px 40px;
  position: relative;
}

.vault-header::after {
  content: '';
  position: absolute;
  bottom: -1px;
  left: 0;
  width: 100%;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--terminal-cyan), transparent);
  animation: scan-line 3s linear infinite;
}

@keyframes scan-line {
  0% { opacity: 0.3; }
  50% { opacity: 1; }
  100% { opacity: 0.3; }
}

.header-content {
  max-width: 1400px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

.vault-title {
  display: flex;
  align-items: center;
  justify-content: center;
}

.vault-logo {
  width: 50px;
  height: 50px;
  border: 2px solid var(--terminal-cyan);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Orbitron', monospace;
  font-weight: 900;
  font-size: 18px;
  color: var(--terminal-cyan);
  box-shadow: 0 0 20px rgba(0, 212, 255, 0.3), inset 0 0 20px rgba(0, 212, 255, 0.1);
  animation: pulse-glow 2s ease-in-out infinite;
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(0, 212, 255, 0.3), inset 0 0 20px rgba(0, 212, 255, 0.1); }
  50% { box-shadow: 0 0 30px rgba(0, 212, 255, 0.5), inset 0 0 30px rgba(0, 212, 255, 0.2); }
}

.vault-title h1 {
  font-family: 'Orbitron', monospace;
  font-size: 1.8rem;
  font-weight: 700;
  letter-spacing: 4px;
  text-transform: uppercase;
  background: linear-gradient(90deg, var(--terminal-cyan), var(--terminal-green));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.vault-title .subtitle {
  font-family: 'Share Tech Mono', monospace;
  font-size: 0.75rem;
  color: var(--text-muted);
  letter-spacing: 3px;
  text-transform: uppercase;
  margin-top: 4px;
}

.vault-status {
  display: flex;
  align-items: center;
  gap: 30px;
  margin-top: 12px;
}

.status-indicator {
  display: flex;
  align-items: center;
  gap: 8px;
  font-family: 'Share Tech Mono', monospace;
  font-size: 0.8rem;
  color: var(--text-muted);
}

.status-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--terminal-green);
  box-shadow: 0 0 10px var(--terminal-green);
  animation: blink 1.5s ease-in-out infinite;
}

@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.4; }
}

.classified-badge {
  font-family: 'Orbitron', monospace;
  font-size: 0.65rem;
  font-weight: 700;
  letter-spacing: 2px;
  padding: 6px 14px;
  border: 1px solid var(--terminal-amber);
  color: var(--terminal-amber);
  text-transform: uppercase;
  position: relative;
  overflow: hidden;
}

.classified-badge::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 184, 0, 0.2), transparent);
  animation: shimmer 2s infinite;
}

@keyframes shimmer {
  0% { left: -100%; }
  100% { left: 100%; }
}

/* ============================================
   MAIN CONTAINER
   ============================================ */
.vault-container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 40px;
}

/* ============================================
   TERMINAL PANEL &#x2014; Base Component
   ============================================ */
.terminal-panel {
  background: var(--vault-panel);
  border: 1px solid var(--vault-border);
  border-radius: 4px;
  margin-bottom: 30px;
  position: relative;
  overflow: hidden;
}

.terminal-panel::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, var(--vault-border), var(--vault-glow), var(--vault-border));
}

.terminal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 20px;
  background: rgba(0, 0, 0, 0.3);
  border-bottom: 1px solid var(--vault-border);
}

.terminal-title {
  display: flex;
  align-items: center;
  gap: 12px;
}

.terminal-icon {
  width: 12px;
  height: 12px;
  border: 2px solid var(--terminal-cyan);
  border-radius: 2px;
  position: relative;
}

.terminal-icon::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 4px;
  height: 4px;
  background: var(--terminal-cyan);
  border-radius: 1px;
}

.terminal-title h2 {
  font-family: 'Orbitron', monospace;
  font-size: 0.85rem;
  font-weight: 600;
  letter-spacing: 2px;
  text-transform: uppercase;
  color: var(--text-primary);
}

.terminal-controls {
  display: flex;
  gap: 8px;
}

/* --- Time Toggle Buttons --- */
.time-btn {
  font-family: 'Share Tech Mono', monospace;
  font-size: 0.7rem;
  padding: 6px 12px;
  background: transparent;
  border: 1px solid var(--vault-border);
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.2s ease;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.time-btn:hover {
  border-color: var(--terminal-cyan);
  color: var(--terminal-cyan);
}

.time-btn.active {
  background: rgba(0, 212, 255, 0.1);
  border-color: var(--terminal-cyan);
  color: var(--terminal-cyan);
  box-shadow: 0 0 10px rgba(0, 212, 255, 0.2);
}

.terminal-body {
  padding: 20px;
  min-height: 300px;
  position: relative;
}

/* ============================================
   CHART CONTAINER
   ============================================ */
.chart-container {
  position: relative;
  height: 280px;
}

/* ============================================
   STATS BAR &#x2014; Below Charts
   ============================================ */
.stats-bar {
  display: flex;
  gap: 30px;
  padding: 15px 20px;
  background: rgba(0, 0, 0, 0.2);
  border-top: 1px solid var(--vault-border);
}

.stat-item {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.stat-label {
  font-family: 'Share Tech Mono', monospace;
  font-size: 0.65rem;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 1px;
}

.stat-value {
  font-family: 'Orbitron', monospace;
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--terminal-cyan);
}

.stat-value.green { color: var(--terminal-green); }
.stat-value.amber { color: var(--terminal-amber); }
.stat-value.red { color: var(--terminal-red); }

.stat-change {
  font-family: 'Share Tech Mono', monospace;
  font-size: 0.7rem;
  margin-left: 8px;
}

.stat-change.up { color: var(--terminal-green); }
.stat-change.down { color: var(--terminal-red); }

/* ============================================
   PANEL EXPLANATIONS
   ============================================ */
.panel-explain {
  font-family: 'Share Tech Mono', monospace;
  font-size: 0.85rem;
  line-height: 1.6;
  color: var(--text-muted);
  padding: 12px 18px;
  margin: 0;
  border-top: 1px solid var(--vault-border);
  border-left: 3px solid var(--terminal-cyan);
  background: rgba(0, 212, 255, 0.03);
}

/* ============================================
   LOADING STATE
   ============================================ */
.loading-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(13, 17, 23, 0.9);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 15px;
  z-index: 10;
}

.loading-spinner {
  width: 40px;
  height: 40px;
  border: 2px solid var(--vault-border);
  border-top-color: var(--terminal-cyan);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.loading-text {
  font-family: 'Share Tech Mono', monospace;
  font-size: 0.8rem;
  color: var(--terminal-cyan);
  letter-spacing: 2px;
  text-transform: uppercase;
}

/* ============================================
   ERROR STATE
   ============================================ */
.error-message {
  font-family: 'Share Tech Mono', monospace;
  color: var(--terminal-red);
  text-align: center;
  padding: 40px;
}

.error-message .error-code {
  font-family: 'Orbitron', monospace;
  font-size: 1.4rem;
  font-weight: 700;
  margin-bottom: 10px;
  letter-spacing: 3px;
}

.error-message .error-detail {
  font-size: 0.8rem;
  color: var(--text-muted);
  margin-top: 8px;
}

/* ============================================
   TWO-COLUMN GRID &#x2014; Side-by-Side Panels
   Used for smaller charts like mempool/block time,
   fees/revenue, hashprice/halving
   ============================================ */
.panel-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 30px;
}

.panel-grid .terminal-panel {
  margin-bottom: 0;
}

.panel-grid .terminal-body {
  min-height: 260px;
}

.panel-grid .chart-container {
  height: 220px;
}

/* ============================================
   HALVING COUNTDOWN &#x2014; Special Panel
   ============================================ */
.halving-panel .terminal-body {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 260px;
  text-align: center;
}

.halving-countdown {
  display: flex;
  gap: 24px;
  margin: 20px 0;
}

.countdown-block {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
}

.countdown-value {
  font-family: 'Orbitron', monospace;
  font-size: 2.4rem;
  font-weight: 900;
  color: var(--terminal-amber);
  text-shadow: 0 0 20px rgba(255, 184, 0, 0.4);
  min-width: 80px;
  line-height: 1;
}

.countdown-label {
  font-family: 'Share Tech Mono', monospace;
  font-size: 0.65rem;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 2px;
}

.halving-info {
  font-family: 'Share Tech Mono', monospace;
  font-size: 0.75rem;
  color: var(--text-muted);
  margin-top: 10px;
  letter-spacing: 1px;
}

.halving-info .highlight {
  color: var(--terminal-amber);
  font-weight: 600;
}

.halving-epoch {
  font-family: 'Orbitron', monospace;
  font-size: 0.7rem;
  font-weight: 600;
  letter-spacing: 2px;
  color: var(--terminal-cyan);
  margin-bottom: 10px;
  text-transform: uppercase;
}

.halving-progress {
  width: 80%;
  max-width: 320px;
  margin-top: 20px;
}

.progress-bar-track {
  width: 100%;
  height: 6px;
  background: var(--vault-border);
  border-radius: 3px;
  overflow: hidden;
  position: relative;
}

.progress-bar-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--terminal-cyan), var(--terminal-amber));
  border-radius: 3px;
  transition: width 0.6s ease;
  box-shadow: 0 0 8px rgba(0, 212, 255, 0.4);
}

.progress-label {
  display: flex;
  justify-content: space-between;
  margin-top: 6px;
  font-family: 'Share Tech Mono', monospace;
  font-size: 0.6rem;
  color: var(--text-muted);
  letter-spacing: 1px;
}

/* ============================================
   DIFFICULTY ADJUSTMENT MARKERS
   For Chart 5 &#x2014; % change annotations
   ============================================ */
.diff-adjust-legend {
  display: flex;
  gap: 16px;
  padding: 10px 20px;
  border-top: 1px solid var(--vault-border);
  background: rgba(0, 0, 0, 0.15);
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 6px;
  font-family: 'Share Tech Mono', monospace;
  font-size: 0.65rem;
  color: var(--text-muted);
}

.legend-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
}

.legend-dot.positive { background: var(--terminal-green); }
.legend-dot.negative { background: var(--terminal-red); }

/* ============================================
   OVERLAY CHART &#x2014; Dual-Axis (Chart 4)
   Hashrate vs Price
   ============================================ */
.overlay-legend {
  display: flex;
  gap: 20px;
  padding: 8px 20px;
  border-top: 1px solid var(--vault-border);
  background: rgba(0, 0, 0, 0.15);
}

.overlay-legend-item {
  display: flex;
  align-items: center;
  gap: 8px;
  font-family: 'Share Tech Mono', monospace;
  font-size: 0.7rem;
  color: var(--text-muted);
  letter-spacing: 1px;
}

.overlay-legend-line {
  width: 20px;
  height: 2px;
}

.overlay-legend-line.hashrate-line {
  background: var(--terminal-cyan);
  box-shadow: 0 0 4px var(--terminal-cyan);
}

.overlay-legend-line.price-line {
  background: var(--terminal-amber);
  box-shadow: 0 0 4px var(--terminal-amber);
}

/* ============================================
   SECTION DIVIDER
   Visual break between chart groups
   ============================================ */
.section-divider {
  display: flex;
  align-items: center;
  gap: 20px;
  margin: 40px 0 30px;
  font-family: 'Orbitron', monospace;
  font-size: 0.7rem;
  font-weight: 600;
  letter-spacing: 3px;
  color: var(--text-muted);
  text-transform: uppercase;
}

.section-divider::before,
.section-divider::after {
  content: '';
  flex: 1;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--vault-border), transparent);
}

.section-divider .divider-icon {
  width: 6px;
  height: 6px;
  background: var(--vault-glow);
  transform: rotate(45deg);
}

/* ============================================
   TOOLTIP &#x2014; Chart.js Custom Tooltip
   ============================================ */
.vault-tooltip {
  background: var(--vault-dark) !important;
  border: 1px solid var(--vault-border) !important;
  border-radius: 4px !important;
  padding: 10px 14px !important;
  font-family: 'Share Tech Mono', monospace !important;
  font-size: 0.75rem !important;
  color: var(--text-primary) !important;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5) !important;
}

.vault-tooltip .tooltip-label {
  color: var(--text-muted);
  margin-bottom: 4px;
  font-size: 0.65rem;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.vault-tooltip .tooltip-value {
  color: var(--terminal-cyan);
  font-family: 'Orbitron', monospace;
  font-weight: 600;
}

/* vault-footer removed - using standard footer */

/* ============================================
   DATA REFRESH INDICATOR
   Top-right timestamp showing last refresh
   ============================================ */
.refresh-bar {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  gap: 12px;
  padding: 10px 0;
  margin-bottom: 10px;
}

.refresh-timestamp {
  font-family: 'Share Tech Mono', monospace;
  font-size: 0.7rem;
  color: var(--text-muted);
  letter-spacing: 1px;
}

.refresh-btn {
  font-family: 'Share Tech Mono', monospace;
  font-size: 0.65rem;
  padding: 4px 10px;
  background: transparent;
  border: 1px solid var(--vault-border);
  color: var(--text-muted);
  cursor: pointer;
  text-transform: uppercase;
  letter-spacing: 1px;
  transition: all 0.2s ease;
}

.refresh-btn:hover {
  border-color: var(--terminal-green);
  color: var(--terminal-green);
  box-shadow: 0 0 8px rgba(0, 255, 136, 0.15);
}

.refresh-btn.refreshing {
  pointer-events: none;
  color: var(--terminal-cyan);
  border-color: var(--terminal-cyan);
}

/* ============================================
   INITIAL BOOT SEQUENCE
   Full-screen overlay on first load
   ============================================ */
.boot-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: var(--vault-black);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  transition: opacity 0.8s ease;
}

.boot-overlay.fade-out {
  opacity: 0;
  pointer-events: none;
}

.boot-logo {
  width: 80px;
  height: 80px;
  border: 3px solid var(--terminal-cyan);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Orbitron', monospace;
  font-weight: 900;
  font-size: 28px;
  color: var(--terminal-cyan);
  box-shadow: 0 0 40px rgba(0, 212, 255, 0.4), inset 0 0 40px rgba(0, 212, 255, 0.15);
  margin-bottom: 30px;
  animation: pulse-glow 1.5s ease-in-out infinite;
}

.boot-title {
  font-family: 'Orbitron', monospace;
  font-size: 2.5rem;
  font-weight: 700;
  color: var(--terminal-cyan);
  letter-spacing: 6px;
  text-transform: uppercase;
  text-align: center;
  margin-bottom: 40px;
  text-shadow: 0 0 30px rgba(0, 212, 255, 0.4);
}

.boot-text {
  font-family: 'Share Tech Mono', monospace;
  font-size: 0.85rem;
  color: var(--terminal-cyan);
  letter-spacing: 3px;
  text-transform: uppercase;
  animation: boot-flicker 0.1s ease-in-out infinite alternate;
}

@keyframes boot-flicker {
  0% { opacity: 0.8; }
  100% { opacity: 1; }
}

.boot-progress {
  width: 200px;
  height: 2px;
  background: var(--vault-border);
  margin-top: 20px;
  border-radius: 1px;
  overflow: hidden;
}

.boot-progress-fill {
  height: 100%;
  width: 0%;
  background: var(--terminal-cyan);
  box-shadow: 0 0 10px var(--terminal-cyan);
  transition: width 0.3s ease;
}

/* ============================================
   RESPONSIVE &#x2014; Tablet
   ============================================ */
@media (max-width: 1024px) {
  .panel-grid {
    grid-template-columns: 1fr;
  }

  .halving-countdown {
    gap: 16px;
  }

  .countdown-value {
    font-size: 2rem;
    min-width: 60px;
  }
}

/* ============================================
   RESPONSIVE &#x2014; Mobile
   ============================================ */
@media (max-width: 768px) {
  .boot-title {
    font-size: 1.8rem;
    letter-spacing: 4px;
  }
  .vault-header {
    padding: 15px 20px;
  }

  .header-content {
    flex-direction: column;
    gap: 15px;
  }

  .vault-title h1 {
    font-size: 1.3rem;
    letter-spacing: 2px;
  }

  .vault-container {
    padding: 20px;
  }

  .stats-bar {
    flex-wrap: wrap;
    gap: 20px;
  }

  .terminal-controls {
    flex-wrap: wrap;
  }

  .panel-grid {
    grid-template-columns: 1fr;
  }

  .halving-countdown {
    gap: 12px;
    flex-wrap: wrap;
    justify-content: center;
  }

  .countdown-value {
    font-size: 1.8rem;
    min-width: 55px;
  }

  .section-divider {
    margin: 30px 0 20px;
    font-size: 0.6rem;
    letter-spacing: 2px;
  }

  .overlay-legend {
    flex-wrap: wrap;
    gap: 12px;
  }

  .refresh-bar {
    flex-direction: column;
    align-items: flex-end;
    gap: 8px;
  }
}

/* ============================================
   RESPONSIVE &#x2014; Small Mobile
   ============================================ */
@media (max-width: 480px) {
  .boot-title {
    font-size: 1.3rem;
    letter-spacing: 2px;
    margin-bottom: 30px;
  }
  .vault-title h1 {
    font-size: 1.1rem;
    letter-spacing: 1px;
  }

  .vault-logo {
    width: 40px;
    height: 40px;
    font-size: 14px;
  }

  .vault-container {
    padding: 15px;
  }

  .terminal-header {
    flex-direction: column;
    gap: 10px;
    align-items: flex-start;
  }

  .stat-value {
    font-size: 0.95rem;
  }

  .countdown-value {
    font-size: 1.5rem;
  }
}

</style>
  <!-- Hamburger nav overrides for vault theme -->
  <style>
    .hamburger-menu {
      position: fixed;
      top: 1rem;
      left: 1rem;
      z-index: 10001;
    }
    .hamburger-btn {
      background: var(--vault-panel);
      border: 2px solid var(--terminal-cyan);
      color: var(--terminal-cyan);
      width: 44px;
      height: 44px;
      border-radius: 8px;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 5px;
      transition: all 0.3s ease;
      box-shadow: 0 0 10px rgba(0, 206, 209, 0.4);
    }
    .hamburger-btn:hover {
      background: var(--terminal-cyan);
      color: #000;
      box-shadow: 0 0 20px rgba(0, 206, 209, 0.4);
    }
    .hamburger-btn .bun-top {
      width: 24px;
      height: 6px;
      background: linear-gradient(180deg, #F4A460 0%, #DEB887 100%);
      border-radius: 10px 10px 0 0;
      transition: all 0.3s ease;
    }
    .hamburger-btn .lettuce {
      width: 26px;
      height: 3px;
      background: #32CD32;
      border-radius: 1px;
      transition: all 0.3s ease;
    }
    .hamburger-btn .patty {
      width: 24px;
      height: 4px;
      background: linear-gradient(180deg, #8B4513 0%, #654321 100%);
      border-radius: 2px;
      transition: all 0.3s ease;
    }
    .hamburger-btn .cheese {
      width: 26px;
      height: 3px;
      background: #FFD700;
      border-radius: 1px;
      transform: skewX(-5deg);
      transition: all 0.3s ease;
    }
    .hamburger-btn .bun-bottom {
      width: 24px;
      height: 5px;
      background: linear-gradient(180deg, #DEB887 0%, #F4A460 100%);
      border-radius: 0 0 6px 6px;
      transition: all 0.3s ease;
    }
    .hamburger-btn.open .bun-top { transform: rotate(45deg) translate(6px, 8px); }
    .hamburger-btn.open .lettuce { opacity: 0; }
    .hamburger-btn.open .patty { opacity: 0; }
    .hamburger-btn.open .cheese { opacity: 0; }
    .hamburger-btn.open .bun-bottom { transform: rotate(-45deg) translate(6px, -8px); }

    .nav-drawer {
      position: fixed;
      top: 0;
      left: -280px;
      width: 280px;
      height: 100vh;
      overflow-y: auto;
      background: var(--vault-dark);
      border-right: 2px solid var(--terminal-cyan);
      z-index: 10000;
      transition: left 0.3s ease;
      padding: 70px 1.5rem 1.5rem;
      box-shadow: 5px 0 30px rgba(0, 0, 0, 0.5);
    }
    .nav-drawer.open { left: 0; }
    .nav-drawer h3 {
      color: var(--terminal-amber);
      font-size: 1rem;
      padding-left: 50px;
      margin-bottom: 1.5rem;
      padding-bottom: 0.5rem;
      border-bottom: 1px solid rgba(255, 184, 0, 0.3);
    }
    .nav-drawer a, .nav-drawer .nav-disabled {
      display: block;
      color: var(--text-primary);
      text-decoration: none;
      padding: 0.5rem 1rem;
      margin-bottom: 0.3rem;
      border-radius: 6px;
      font-size: 1rem;
      transition: all 0.2s ease;
      border: 1px solid transparent;
    }
    .nav-drawer a:hover {
      background: var(--vault-panel);
      border-color: var(--terminal-cyan);
      color: var(--terminal-cyan);
    }
    .nav-drawer a.active {
      background: rgba(0, 212, 255, 0.1);
      border-color: var(--terminal-cyan);
      color: #ffffff;
    }
    .nav-drawer .nav-disabled {
      color: var(--text-muted);
      cursor: not-allowed;
    }
    .nav-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 9998;
    }
    .nav-overlay.show { display: block; }

    /* ============================================
       GLOSSARY DRAWER (vault-themed)
       ============================================ */
    .glossary-drawer {
      position: fixed;
      top: 0;
      right: -420px;
      width: 420px;
      max-width: 92vw;
      height: 100vh;
      background: var(--vault-dark, #0a0e1a);
      border-left: 2px solid var(--terminal-cyan, #00d4ff);
      z-index: 10002;
      transition: right 0.25s ease;
      padding: 1.5rem 1.5rem 1.25rem;
      overflow-y: auto;
      box-shadow: -10px 0 40px rgba(0, 212, 255, 0.3);
      backdrop-filter: blur(8px);
    }
    
    .glossary-drawer.open { right: 0; }
    
    .glossary-drawer-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: transparent;
      border: 1px solid rgba(0, 212, 255, 0.55);
      color: var(--terminal-cyan, #00d4ff);
      width: 36px;
      height: 36px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 1.35rem;
      line-height: 1;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      box-shadow: 0 0 18px rgba(0, 212, 255, 0.12);
    }
    
    .glossary-drawer-close:hover {
      background: rgba(0, 212, 255, 0.12);
      border-color: var(--terminal-cyan, #00d4ff);
    }
    
    .glossary-drawer h3 {
      font-family: 'Orbitron', monospace;
      color: var(--terminal-amber, #ffb800);
      font-size: 1.1rem;
      margin: 0.25rem 0 0.85rem;
      padding-right: 2.5rem;
      letter-spacing: 1px;
    }
    
    .glossary-drawer p {
      font-family: 'Rajdhani', sans-serif;
      color: var(--text-secondary, #8899a8);
      line-height: 1.75;
      font-size: 1.05rem;
      margin: 0 0 1rem;
    }
    
    .glossary-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.55);
      z-index: 10001;
    }
    
    .glossary-overlay.show { display: block; }
    
    .glossary-term {
      color: var(--terminal-cyan, #00d4ff);
      border-bottom: 1px dotted var(--terminal-cyan, #00d4ff);
      cursor: help;
      transition: color 0.15s ease, border-color 0.15s ease;
      text-decoration: none;
      white-space: nowrap;
    }
    
    .glossary-term:hover {
      color: var(--terminal-amber, #ffb800);
      border-color: var(--terminal-amber, #ffb800);
    }
    .glossary-term-actions {
      margin-top: 1.25rem;
      padding-top: 1rem;
      border-top: 1px solid rgba(255, 184, 0, 0.14);
    }
    .glossary-more-link {
      color: var(--terminal-cyan, #00d4ff);
      text-decoration: none;
      font-weight: 600;
      letter-spacing: 0.3px;
    }
    .glossary-more-link:hover { color: var(--terminal-amber, #ffb800); }

    /* Glossary drawer buy/official pill buttons */
    .glossary-term-links {
      display: flex;
      flex-wrap: wrap;
      gap: 0.45rem;
      margin-top: 1rem;
    }
    .glossary-pill {
      display: inline-flex;
      align-items: center;
      padding: 0.4rem 0.75rem;
      border-radius: 8px;
      text-decoration: none;
      font-weight: 700;
      font-size: 0.8rem;
      letter-spacing: 0.03em;
      border: 1px solid rgba(0, 212, 255, 0.35);
      background: rgba(0, 212, 255, 0.08);
      color: var(--terminal-cyan, #00d4ff);
      transition: transform 0.15s ease, background 0.15s ease, border-color 0.15s ease;
    }
    .glossary-pill:hover {
      transform: translateY(-1px);
      background: rgba(0, 212, 255, 0.14);
      border-color: rgba(0, 212, 255, 0.55);
      color: var(--terminal-cyan, #00d4ff);
      text-decoration: none;
    }
    .glossary-pill-amazon {
      border-color: rgba(255, 184, 0, 0.35);
      background: rgba(255, 184, 0, 0.08);
      color: var(--terminal-amber, #ffb800);
    }
    .glossary-pill-amazon:hover {
      background: rgba(255, 184, 0, 0.14);
      border-color: rgba(255, 184, 0, 0.55);
      color: var(--terminal-amber, #ffb800);
    }
    .glossary-pill-official {
      border-color: rgba(0, 212, 255, 0.35);
      background: rgba(0, 212, 255, 0.08);
      color: var(--terminal-cyan, #00d4ff);
    }

    @media (max-width: 600px) {
      .glossary-drawer { width: 100%; right: -100%; }
    }
  
    /* ============================================
       SITE FOOTER
       ============================================ */
    footer {
      text-align: center;
      padding: 2rem 1rem;
      margin-top: 2rem;
      border-top: 1px solid rgba(0, 206, 209, 0.2);
      color: #8899aa;
    }
    footer a {
      color: #00CED1;
      text-decoration: none;
    }
    footer a:hover {
      color: #D4AF37;
    }
  </style>
  <script type="application/ld+json">{"@context":"https://schema.org","@type":"Dataset","name":"Solas Array - Live Mining Data Vault","description":"Real-time cryptocurrency mining network statistics including difficulty, hashrate, and block data.","url":"https://www.solarayeffect.com/datavault.html","license":"https://www.solarayeffect.com/","creator":{"@type":"Organization","name":"The Sola Ray Effect"}}</script>
</head>
<body>

  <!-- Boot Overlay -->
  <div class="boot-overlay" id="boot-overlay">
    <div class="boot-content">
      <div class="boot-title">Welcome to Sola's Array</div>
      <div class="boot-progress">
        <div class="boot-progress-fill" id="boot-progress-fill"></div>
      </div>
      <div class="boot-text" id="boot-text">DATA VAULT v4.7.7</div>
    </div>
  </div>

  <!-- Shared Navigation (loaded from /Components/nav.html) -->
  <div id="site-nav"></div>

  <!-- Glossary Drawer -->
  <div class="glossary-drawer" id="glossary-drawer" aria-hidden="true">
    <button class="glossary-drawer-close" id="glossary-close" aria-label="Close glossary">&times;</button>
    <h3 id="glossary-term-title">Term</h3>
    <p id="glossary-term-definition">Definition goes here...</p>
    <div id="glossary-term-links" class="glossary-term-links"></div>
    <div class="glossary-term-actions">
      <a class="glossary-more-link" href="glossary.html">Open full glossary &rarr;</a>
    </div>
  </div>
  <div class="glossary-overlay" id="glossary-overlay" aria-hidden="true"></div>

  <!-- Header -->
  <header class="vault-header">
    <div class="header-content">
      <div class="vault-title">
        <div>
          <h1>Live Mining Stats &mdash; Network Difficulty, Hashrate & Market Data</h1>
          <div class="subtitle">Data Vault &#x2022; Sector 7</div>
        </div>
      </div>
      <div class="vault-status">
        <div class="status-indicator">
          <span class="status-dot"></span>
          <span>LIVE FEED</span>
        </div>
        <div class="classified-badge">Restricted Access</div>
      </div>
    </div>
  </header>
    <p class="affiliate-disclosure" style="text-align:center;font-size:0.85rem;color:#aaa;margin:0.5rem 0 1rem;">This website contains affiliate links. We may earn a commission if you purchase through them, at no extra cost to you.</p>

  <main class="vault-container">

    <!-- Refresh Bar -->
    <div class="refresh-bar">
      <span class="refresh-timestamp">Last sync: --:--:--</span>
      <button class="refresh-btn">REFRESH DATA</button>
    </div>

    <!-- &#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;
         SECTION: CORE METRICS
         Hashrate &#x2022; Difficulty &#x2022; Price
         &#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90; -->

    <!-- Panel 1: Network Hashrate -->
    <div class="terminal-panel" id="hashrate-panel">
      <div class="terminal-header">
        <div class="terminal-title">
          <div class="terminal-icon"></div>
          <h2>Network <span class="glossary-term" data-term="hashrate">Hashrate</span></h2>
        </div>
        <div class="terminal-controls">
          <button class="time-btn" data-range="30" data-chart="hashrate">30D</button>
          <button class="time-btn" data-range="90" data-chart="hashrate">90D</button>
          <button class="time-btn active" data-range="365" data-chart="hashrate">1Y</button>
        </div>
      </div>
      <div class="terminal-body">
        <div class="loading-overlay" id="hashrate-loading">
          <div class="loading-spinner"></div>
          <div class="loading-text">Accessing mainframe...</div>
        </div>
        <div class="chart-container">
          <canvas id="hashrate-chart"></canvas>
        </div>
      </div>
      <div class="stats-bar">
        <div class="stat-item">
          <span class="stat-label">Current Hashrate</span>
          <span class="stat-value" id="hashrate-current">--</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">30D Change</span>
          <span class="stat-value" id="hashrate-change">--</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">All-Time High</span>
          <span class="stat-value amber" id="hashrate-ath">--</span>
        </div>
      </div>
      <div class="panel-explain">Total computing power securing the Bitcoin network. When <span class="glossary-term" data-term="hashrate">hashrate</span> rises, more miners are competing &#x2014; which usually means <span class="glossary-term" data-term="difficulty">difficulty</span> is about to increase. For home miners, rising hashrate means your slice of the pie gets smaller.</div>
    </div>

    <!-- Panel 2: Mining Difficulty -->
    <div class="terminal-panel" id="difficulty-panel">
      <div class="terminal-header">
        <div class="terminal-title">
          <div class="terminal-icon"></div>
          <h2>Mining <span class="glossary-term" data-term="difficulty">Difficulty</span></h2>
        </div>
        <div class="terminal-controls">
          <button class="time-btn" data-range="30" data-chart="difficulty">30D</button>
          <button class="time-btn" data-range="90" data-chart="difficulty">90D</button>
          <button class="time-btn active" data-range="365" data-chart="difficulty">1Y</button>
        </div>
      </div>
      <div class="terminal-body">
        <div class="loading-overlay" id="difficulty-loading">
          <div class="loading-spinner"></div>
          <div class="loading-text">Decrypting data...</div>
        </div>
        <div class="chart-container">
          <canvas id="difficulty-chart"></canvas>
        </div>
      </div>
      <div class="stats-bar">
        <div class="stat-item">
          <span class="stat-label">Current Difficulty</span>
          <span class="stat-value" id="difficulty-current">--</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Next Adjustment</span>
          <span class="stat-value green" id="difficulty-next">--</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Est. Change</span>
          <span class="stat-value" id="difficulty-est">--</span>
        </div>
      </div>
      <div class="panel-explain">How hard it is to mine a Bitcoin block. Adjusts every ~2,016 blocks (roughly 2 weeks) based on <span class="glossary-term" data-term="hashrate">hashrate</span>. When <span class="glossary-term" data-term="difficulty">difficulty</span> goes up, your miner earns less BTC for the same electricity. This is the single most important number for your profitability.</div>
    </div>

    <!-- Panel 3: BTC Market Price -->
    <div class="terminal-panel" id="price-panel">
      <div class="terminal-header">
        <div class="terminal-title">
          <div class="terminal-icon"></div>
          <h2>BTC Market Price</h2>
        </div>
        <div class="terminal-controls">
          <button class="time-btn" data-range="30" data-chart="price">30D</button>
          <button class="time-btn" data-range="90" data-chart="price">90D</button>
          <button class="time-btn active" data-range="365" data-chart="price">1Y</button>
        </div>
      </div>
      <div class="terminal-body">
        <div class="loading-overlay" id="price-loading">
          <div class="loading-spinner"></div>
          <div class="loading-text">Syncing market data...</div>
        </div>
        <div class="chart-container">
          <canvas id="price-chart"></canvas>
        </div>
      </div>
      <div class="stats-bar">
        <div class="stat-item">
          <span class="stat-label">Current Price</span>
          <span class="stat-value green" id="price-current">--</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">30D Change</span>
          <span class="stat-value" id="price-change">--</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">All-Time High</span>
          <span class="stat-value amber" id="price-ath">--</span>
        </div>
      </div>
      <div class="panel-explain">What one Bitcoin is worth in USD. Price rising can offset difficulty increases &#x2014; even if you're mining less BTC, each coin is worth more. Price dropping while difficulty stays high is the worst-case scenario for miners.</div>
    </div>

    <!-- &#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;
         SECTION: CORRELATION ANALYSIS
         &#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90; -->
    <div class="section-divider">
      <div class="divider-icon"></div>
      CORRELATION ANALYSIS
      <div class="divider-icon"></div>
    </div>

    <!-- Panel 4: Hashrate vs Price Overlay (dual-axis) -->
    <div class="terminal-panel" id="overlay-panel">
      <div class="terminal-header">
        <div class="terminal-title">
          <div class="terminal-icon"></div>
          <h2>Hashrate vs Price</h2>
        </div>
        <div class="terminal-controls">
          <button class="time-btn" data-range="30" data-chart="overlay">30D</button>
          <button class="time-btn" data-range="90" data-chart="overlay">90D</button>
          <button class="time-btn active" data-range="365" data-chart="overlay">1Y</button>
        </div>
      </div>
      <div class="terminal-body">
        <div class="loading-overlay" id="overlay-loading">
          <div class="loading-spinner"></div>
          <div class="loading-text">Correlating signals...</div>
        </div>
        <div class="chart-container">
          <canvas id="overlay-chart"></canvas>
        </div>
      </div>
      <div class="overlay-legend">
        <div class="overlay-legend-item">
          <div class="overlay-legend-line hashrate-line"></div>
          <span>Hashrate</span>
        </div>
        <div class="overlay-legend-item">
          <div class="overlay-legend-line price-line"></div>
          <span>Price</span>
        </div>
      </div>
      <div class="stats-bar">
        <div class="stat-item">
          <span class="stat-label">Hashrate</span>
          <span class="stat-value" id="overlay-hashrate">--</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Price</span>
          <span class="stat-value" id="overlay-price">--</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">30D Trend</span>
          <span class="stat-value" id="overlay-correlation">--</span>
        </div>
      </div>
      <div class="panel-explain">Shows whether hashrate and price are moving together or apart. When they're aligned (both rising), mining economics are stable. When they diverge &#x2014; especially price dropping while hashrate climbs &#x2014; profitability is getting squeezed.</div>
    </div>

    <!-- Panel 5: Difficulty Adjustments (bar chart) -->
    <div class="terminal-panel" id="adjustments-panel">
      <div class="terminal-header">
        <div class="terminal-title">
          <div class="terminal-icon"></div>
          <h2>Difficulty Adjustments</h2>
        </div>
        <div class="terminal-controls">
          <button class="time-btn" data-range="90" data-chart="adjustments">90D</button>
          <button class="time-btn" data-range="180" data-chart="adjustments">180D</button>
          <button class="time-btn active" data-range="365" data-chart="adjustments">1Y</button>
        </div>
      </div>
      <div class="terminal-body">
        <div class="loading-overlay" id="adjustments-loading">
          <div class="loading-spinner"></div>
          <div class="loading-text">Analyzing adjustments...</div>
        </div>
        <div class="chart-container">
          <canvas id="adjustments-chart"></canvas>
        </div>
      </div>
      <div class="diff-adjust-legend">
        <div class="legend-item">
          <div class="legend-dot positive"></div>
          <span>Positive (difficulty up)</span>
        </div>
        <div class="legend-item">
          <div class="legend-dot negative"></div>
          <span>Negative (difficulty down)</span>
        </div>
      </div>
      <div class="stats-bar">
        <div class="stat-item">
          <span class="stat-label">Last Adjustment</span>
          <span class="stat-value" id="adj-last">--</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Positive/Total</span>
          <span class="stat-value" id="adj-positive">--</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Avg Change</span>
          <span class="stat-value" id="adj-avg">--</span>
        </div>
      </div>
      <div class="panel-explain">Each bar is one difficulty adjustment (every ~2 weeks). Green bars mean difficulty went up &#x2014; more competition. Red bars mean it dropped &#x2014; miners leaving the network. A string of green bars means the network is growing and your earnings per machine are shrinking.</div>
    </div>

    <!-- &#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;
         SECTION: NETWORK HEALTH
         Mempool &#x2022; Block Time &#x2022; Fees
         &#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90; -->
    <div class="section-divider">
      <div class="divider-icon"></div>
      NETWORK HEALTH
      <div class="divider-icon"></div>
    </div>

    <div class="panel-grid">

      <!-- Panel 6: Mempool Size -->
      <div class="terminal-panel" id="mempool-panel">
        <div class="terminal-header">
          <div class="terminal-title">
            <div class="terminal-icon"></div>
            <h2>Mempool Size</h2>
          </div>
          <div class="terminal-controls">
            <button class="time-btn" data-range="30" data-chart="mempool">30D</button>
            <button class="time-btn" data-range="90" data-chart="mempool">90D</button>
            <button class="time-btn active" data-range="365" data-chart="mempool">1Y</button>
          </div>
        </div>
        <div class="terminal-body">
          <div class="loading-overlay" id="mempool-loading">
            <div class="loading-spinner"></div>
            <div class="loading-text">Scanning mempool...</div>
          </div>
          <div class="chart-container">
            <canvas id="mempool-chart"></canvas>
          </div>
        </div>
        <div class="stats-bar">
          <div class="stat-item">
            <span class="stat-label">Current Size</span>
            <span class="stat-value" id="mempool-current">--</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">30D Change</span>
            <span class="stat-value" id="mempool-change">--</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Peak Size</span>
            <span class="stat-value" id="mempool-peak">--</span>
          </div>
        </div>
        <div class="panel-explain">The waiting room for unconfirmed Bitcoin transactions. A large mempool means the network is congested and transaction fees are high &#x2014; which is actually good for miners since fees are part of your revenue. A small mempool means low fees.</div>
      </div>

      <!-- Panel 7: Median Block Time -->
      <div class="terminal-panel" id="blocktime-panel">
        <div class="terminal-header">
          <div class="terminal-title">
            <div class="terminal-icon"></div>
            <h2>Median Block Time</h2>
          </div>
          <div class="terminal-controls">
            <button class="time-btn" data-range="30" data-chart="blocktime">30D</button>
            <button class="time-btn" data-range="90" data-chart="blocktime">90D</button>
            <button class="time-btn active" data-range="365" data-chart="blocktime">1Y</button>
          </div>
        </div>
        <div class="terminal-body">
          <div class="loading-overlay" id="blocktime-loading">
            <div class="loading-spinner"></div>
            <div class="loading-text">Timing block intervals...</div>
          </div>
          <div class="chart-container">
            <canvas id="blocktime-chart"></canvas>
          </div>
        </div>
        <div class="stats-bar">
          <div class="stat-item">
            <span class="stat-label">Current</span>
            <span class="stat-value" id="blocktime-current">--</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Target</span>
            <span class="stat-value" id="blocktime-target">--</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Deviation</span>
            <span class="stat-value" id="blocktime-deviation">--</span>
          </div>
        </div>
        <div class="panel-explain">How long it takes to mine one block, targeting 10 minutes. Blocks coming faster than 10 minutes means miners are outpacing difficulty &#x2014; next adjustment will likely go up. Slower than 10 minutes means hashrate has dropped and difficulty should come down.</div>
      </div>

    </div><!-- /panel-grid (mempool + blocktime) -->

    <!-- Panel 8: Transaction Fees &#x2014; full-width between grids -->
    <div class="terminal-panel" id="fees-panel">
      <div class="terminal-header">
        <div class="terminal-title">
          <div class="terminal-icon"></div>
          <h2>Transaction Fees (USD)</h2>
        </div>
        <div class="terminal-controls">
          <button class="time-btn" data-range="30" data-chart="fees">30D</button>
          <button class="time-btn" data-range="90" data-chart="fees">90D</button>
          <button class="time-btn active" data-range="365" data-chart="fees">1Y</button>
        </div>
      </div>
      <div class="terminal-body">
        <div class="loading-overlay" id="fees-loading">
          <div class="loading-spinner"></div>
          <div class="loading-text">Tallying fees...</div>
        </div>
        <div class="chart-container">
          <canvas id="fees-chart"></canvas>
        </div>
      </div>
      <div class="stats-bar">
        <div class="stat-item">
          <span class="stat-label">Daily Fees</span>
          <span class="stat-value" id="fees-current">--</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">30D Change</span>
          <span class="stat-value" id="fees-change">--</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Peak Fees</span>
          <span class="stat-value" id="fees-peak">--</span>
        </div>
      </div>
      <div class="panel-explain">Total fees paid by Bitcoin users per day in USD. Fees spike during network congestion &#x2014; NFT mints, market panic, heavy trading. For home miners, high-fee periods can meaningfully boost your daily earnings on top of the block reward.</div>
    </div>

    <!-- &#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;
         SECTION: MINING ECONOMICS
         Revenue &#x2022; Hashprice
         &#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90; -->
    <div class="section-divider">
      <div class="divider-icon"></div>
      MINING ECONOMICS
      <div class="divider-icon"></div>
    </div>

    <div class="panel-grid">

      <!-- Panel 9: Miner Revenue -->
      <div class="terminal-panel" id="revenue-panel">
        <div class="terminal-header">
          <div class="terminal-title">
            <div class="terminal-icon"></div>
            <h2>Miner Revenue (USD)</h2>
          </div>
          <div class="terminal-controls">
            <button class="time-btn" data-range="30" data-chart="revenue">30D</button>
            <button class="time-btn" data-range="90" data-chart="revenue">90D</button>
            <button class="time-btn active" data-range="365" data-chart="revenue">1Y</button>
          </div>
        </div>
        <div class="terminal-body">
          <div class="loading-overlay" id="revenue-loading">
            <div class="loading-spinner"></div>
            <div class="loading-text">Compiling revenue data...</div>
          </div>
          <div class="chart-container">
            <canvas id="revenue-chart"></canvas>
          </div>
        </div>
        <div class="stats-bar">
          <div class="stat-item">
            <span class="stat-label">Daily Revenue</span>
            <span class="stat-value" id="revenue-current">--</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">30D Change</span>
            <span class="stat-value" id="revenue-change">--</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Avg Revenue</span>
            <span class="stat-value" id="revenue-avg">--</span>
          </div>
        </div>
        <div class="panel-explain">Total USD earned by all Bitcoin miners per day &#x2014; block rewards plus transaction fees combined. This is the whole pie. Your share depends on what percentage of total network hashrate your machines represent.</div>
      </div>

      <!-- Panel 10: Hashprice -->
      <div class="terminal-panel" id="hashprice-panel">
        <div class="terminal-header">
          <div class="terminal-title">
            <div class="terminal-icon"></div>
            <h2><span class="glossary-term" data-term="hashprice">Hashprice</span> ($/TH/day)</h2>
          </div>
          <div class="terminal-controls">
            <button class="time-btn" data-range="30" data-chart="hashprice">30D</button>
            <button class="time-btn" data-range="90" data-chart="hashprice">90D</button>
            <button class="time-btn active" data-range="365" data-chart="hashprice">1Y</button>
          </div>
        </div>
        <div class="terminal-body">
          <div class="loading-overlay" id="hashprice-loading">
            <div class="loading-spinner"></div>
            <div class="loading-text">Calculating hashprice...</div>
          </div>
          <div class="chart-container">
            <canvas id="hashprice-chart"></canvas>
          </div>
        </div>
        <div class="stats-bar">
          <div class="stat-item">
            <span class="stat-label">Current</span>
            <span class="stat-value" id="hashprice-current">--</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">30D Change</span>
            <span class="stat-value" id="hashprice-change">--</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Period Low</span>
            <span class="stat-value" id="hashprice-low">--</span>
          </div>
        </div>
        <div class="panel-explain">What one terahash of mining power earns per day in USD. This is the bottom line &#x2014; it accounts for difficulty, price, and fees all in one number. Compare this against your electricity cost per TH to know if you're profitable.</div>
      </div>

    </div><!-- /panel-grid (revenue + hashprice) -->

    <!-- &#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;
         SECTION: HALVING EPOCH
         &#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90;&#xE2;&#x2022;&#x90; -->
    <div class="section-divider">
      <div class="divider-icon"></div>
      HALVING EPOCH
      <div class="divider-icon"></div>
    </div>

    <!-- Panel 11: Halving Countdown (no chart &#x2014; custom layout) -->
    <div class="terminal-panel halving-panel" id="halving-panel">
      <div class="terminal-header">
        <div class="terminal-title">
          <div class="terminal-icon"></div>
          <h2>Halving Countdown</h2>
        </div>
      </div>
      <div class="terminal-body">
        <div class="loading-overlay" id="halving-loading">
          <div class="loading-spinner"></div>
          <div class="loading-text">Calculating epoch...</div>
        </div>

        <div class="halving-epoch">EPOCH 5 &#x2014; BLOCK REWARD REDUCTION</div>

        <div class="halving-countdown">
          <div class="countdown-block">
            <span class="countdown-value" id="countdown-days">---</span>
            <span class="countdown-label">Days</span>
          </div>
          <div class="countdown-block">
            <span class="countdown-value" id="countdown-hours">--</span>
            <span class="countdown-label">Hours</span>
          </div>
          <div class="countdown-block">
            <span class="countdown-value" id="countdown-minutes">--</span>
            <span class="countdown-label">Minutes</span>
          </div>
        </div>

        <div class="halving-progress">
          <div class="progress-bar-track">
            <div class="progress-bar-fill" id="halving-progress-fill"></div>
          </div>
          <div class="progress-label">
            <span id="halving-progress-text">--% through current epoch</span>
          </div>
        </div>

        <div class="halving-info">
          Current Reward: <span class="highlight" id="halving-reward-current">3.125 BTC</span>
          &nbsp;&#x2192;&nbsp;
          Post-Halving: <span class="highlight" id="halving-reward-next">1.5625 BTC</span>
        </div>
      </div>
      <div class="stats-bar">
        <div class="stat-item">
          <span class="stat-label">Target Block</span>
          <span class="stat-value amber" id="halving-block">--</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Current Block</span>
          <span class="stat-value" id="halving-current">--</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Blocks Remaining</span>
          <span class="stat-value" id="halving-remaining">--</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Est. Date</span>
          <span class="stat-value green" id="halving-estimate">--</span>
        </div>
      </div>
      <div class="panel-explain">Bitcoin cuts the <span class="glossary-term" data-term="block-reward">block reward</span> in half roughly every 4 years. The last halving (April 2024) dropped the reward from 6.25 to 3.125 BTC per block. The next one will cut it to 1.5625 BTC. Halvings historically squeeze miners short-term but have preceded major price increases.</div>
    </div>

  </main>

    <!-- Shared Footer (loaded from /Components/footer.html) -->
  <div id="site-footer"></div>

  <!-- Chart.js + Date Adapter -->
  <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
  <script>
/* \u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090
   SOLA'S ARRAY \u2014 DATA VAULT CHART ENGINE
   solas-charts.js
   All chart logic, API calls, and data rendering for datavault.html
   Charts: 11 panels covering BTC network, market, and mining data
   APIs: Blockchain.com (free), CoinGecko (free tier)
   Charts: Chart.js with chartjs-adapter-date-fns
   \u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090\u00E2\u2022\u0090 */

// \u2500\u2500\u2500 CHART.JS GLOBAL CONFIG \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500
Chart.defaults.color = '#6b7d8f';
Chart.defaults.borderColor = '#1e2a38';
Chart.defaults.font.family = "'Share Tech Mono', monospace";

// \u2500\u2500\u2500 TERMINAL COLORS \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500
const COLORS = {
  cyan:   '#00d4ff',
  green:  '#00ff88',
  amber:  '#ffb800',
  red:    '#ff3344',
  sand:   '#c4a574',
  muted:  '#6b7d8f',
  panel:  '#131920',
  border: '#1e2a38',
  dark:   '#0d1117'
};

// \u2500\u2500\u2500 DATA STORAGE \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500
const chartData = {
  hashrate:     { full: [], chart: null },
  difficulty:   { full: [], chart: null },
  price:        { full: [], chart: null },
  overlay:      { chart: null },
  adjustments:  { full: [], chart: null },
  mempool:      { full: [], chart: null },
  blocktime:    { full: [], chart: null },
  fees:         { full: [], chart: null },
  revenue:      { full: [], chart: null },
  hashprice:    { full: [], chart: null }
};

// \u2500\u2500\u2500 LOADING MESSAGES \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500
const LOADING_MESSAGES = [
  'Accessing mainframe...',
  'Decrypting data...',
  'Syncing market data...',
  'Establishing uplink...',
  'Scanning network nodes...',
  'Compiling telemetry...',
  'Authenticating clearance...',
  'Retrieving archives...',
  'Calibrating sensors...',
  'Processing signal...',
  'Linking to relay station...'
];

// \u2500\u2500\u2500 BOOT SEQUENCE MESSAGES \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500
const BOOT_MESSAGES = [
  'DATA VAULT v4.7.7',
  'Initializing secure connection...',
  'Authenticating clearance level...',
  'Loading network telemetry...',
  'Establishing API uplinks...',
  'Decrypting data streams...',
  'Calibrating chart arrays...',
  'All systems operational.',
  'Access granted.'
];


/* ================================================================
   SECTION 1: FORMATTING UTILITIES
   ================================================================ */

/**
 * Format hashrate from GH/s (Blockchain.com native unit)
 * into human-readable ZH/s, EH/s, PH/s, TH/s
 */
function formatHashrate(value) {
  if (value >= 1e12) return (value / 1e12).toFixed(2) + ' ZH/s';
  if (value >= 1e9)  return (value / 1e9).toFixed(2) + ' EH/s';
  if (value >= 1e6)  return (value / 1e6).toFixed(2) + ' PH/s';
  if (value >= 1e3)  return (value / 1e3).toFixed(2) + ' TH/s';
  return value.toFixed(2) + ' GH/s';
}

function formatDifficulty(value) {
  if (value >= 1e12) return (value / 1e12).toFixed(2) + ' T';
  if (value >= 1e9)  return (value / 1e9).toFixed(2) + ' B';
  if (value >= 1e6)  return (value / 1e6).toFixed(2) + ' M';
  return value.toFixed(2);
}

function formatPrice(value) {
  return '$' + value.toLocaleString('en-US', { maximumFractionDigits: 0 });
}

function formatPriceDecimal(value) {
  return '$' + value.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
}

function formatPercent(value) {
  const sign = value >= 0 ? '+' : '';
  return sign + value.toFixed(2) + '%';
}

function formatBytes(value) {
  if (value >= 1e9) return (value / 1e9).toFixed(2) + ' GB';
  if (value >= 1e6) return (value / 1e6).toFixed(2) + ' MB';
  if (value >= 1e3) return (value / 1e3).toFixed(2) + ' KB';
  return value.toFixed(0) + ' B';
}

function formatMinutes(value) {
  return value.toFixed(1) + ' min';
}

function formatBTC(value) {
  return value.toFixed(2) + ' BTC';
}

function formatHashprice(value) {
  return '$' + value.toFixed(4) + '/TH/day';
}

function formatNumber(value) {
  return value.toLocaleString('en-US', { maximumFractionDigits: 0 });
}


/* ================================================================
   SECTION 2: DATA PROCESSING UTILITIES
   ================================================================ */

/**
 * Moving average smoothing
 * @param {Array} data - Array of {x, y} objects
 * @param {number} windowSize - Number of points to average
 * @returns {Array} Smoothed data array
 */
function smoothData(data, windowSize) {
  if (!data || data.length < windowSize) return data;

  const smoothed = [];
  for (let i = 0; i < data.length; i++) {
    const start = Math.max(0, i - windowSize + 1);
    const window = data.slice(start, i + 1);
    const avg = window.reduce((sum, d) => sum + d.y, 0) / window.length;
    smoothed.push({ x: data[i].x, y: avg });
  }
  return smoothed;
}

/**
 * Filter data to a specific number of days from now
 * @param {Array} data - Array of {x, y} with x in Unix seconds
 * @param {number} days - Number of days to include
 * @returns {Array} Filtered data
 */
function filterByDays(data, days) {
  const cutoff = Date.now() / 1000 - (days * 24 * 60 * 60);
  return data.filter(d => d.x >= cutoff);
}

/**
 * Calculate percentage change between two values
 */
function calcChange(current, previous) {
  if (!previous || previous === 0) return 0;
  return ((current - previous) / previous) * 100;
}

/**
 * Calculate difficulty adjustment percentages from raw difficulty data
 * Returns array of {x, y} where y is the % change at each adjustment
 */
function calcDifficultyAdjustments(diffData) {
  if (!diffData || diffData.length < 2) return [];

  const adjustments = [];
  let prevValue = diffData[0].y;

  for (let i = 1; i < diffData.length; i++) {
    const curr = diffData[i].y;
    // Difficulty only changes every ~2016 blocks (~14 days)
    // Detect change when value differs from previous
    if (curr !== prevValue) {
      const pctChange = ((curr - prevValue) / prevValue) * 100;
      adjustments.push({
        x: diffData[i].x,
        y: pctChange
      });
      prevValue = curr;
    }
  }
  return adjustments;
}

/**
 * Calculate hashprice: (daily BTC revenue * BTC price) / network hashrate in TH/s
 * hashprice = $/TH/day
 */
function calcHashprice(revenueData, priceData, hashrateData) {
  if (!revenueData?.length || !priceData?.length || !hashrateData?.length) return [];

  const hashprice = [];
  // Build a price lookup by day (rounded to day)
  const priceLookup = {};
  priceData.forEach(p => {
    const dayKey = Math.floor(p.x / 86400);
    priceLookup[dayKey] = p.y;
  });

  const hashrateLookup = {};
  hashrateData.forEach(h => {
    const dayKey = Math.floor(h.x / 86400);
    hashrateLookup[dayKey] = h.y;
  });

  revenueData.forEach(r => {
    const dayKey = Math.floor(r.x / 86400);
    const price = priceLookup[dayKey];
    const hashrate = hashrateLookup[dayKey];

    if (price && hashrate && hashrate > 0) {
      // Revenue is in BTC, hashrate is in GH/s from Blockchain.com
      // Convert hashrate from GH/s to TH/s: divide by 1000
      const hashrateTH = hashrate * 1000; // GH/s * 1000 = TH/s \u2014 wait, no
      // Actually: 1 TH/s = 1000 GH/s, so TH/s = GH/s / 1000
      const hashrateTHs = hashrate / 1000;
      // But network hashrate is enormous, we need per-TH share
      // hashprice = (daily_revenue_btc * btc_price) / (network_hashrate_in_TH)
      const dailyRevenueUSD = r.y * price;
      const hp = dailyRevenueUSD / hashrateTHs;
      if (isFinite(hp) && hp > 0) {
        hashprice.push({ x: r.x, y: hp });
      }
    }
  });

  return hashprice;
}


/* ================================================================
   SECTION 3: CHART CREATION
   ================================================================ */

/**
 * Create a standard single-dataset line chart with terminal styling
 */
function createChart(canvasId, data, label, color, formatFn, options = {}) {
  const canvas = document.getElementById(canvasId);
  if (!canvas) {
    console.warn(`Canvas #${canvasId} not found`);
    return null;
  }

  const ctx = canvas.getContext('2d');

  const gradient = ctx.createLinearGradient(0, 0, 0, 280);
  gradient.addColorStop(0, color + '40');
  gradient.addColorStop(1, color + '00');

  const chartType = options.type || 'line';

  const config = {
    type: chartType,
    data: {
      labels: data.map(d => new Date(d.x * 1000)),
      datasets: [{
        label: label,
        data: data.map(d => d.y),
        borderColor: color,
        backgroundColor: chartType === 'bar' ? color + '80' : gradient,
        borderWidth: chartType === 'bar' ? 0 : 2,
        fill: chartType !== 'bar',
        tension: 0.3,
        pointRadius: 0,
        pointHoverRadius: 5,
        pointHoverBackgroundColor: color,
        pointHoverBorderColor: '#fff',
        pointHoverBorderWidth: 2,
        barPercentage: options.barPercentage || 0.8
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      interaction: {
        intersect: false,
        mode: 'index'
      },
      plugins: {
        legend: { display: false },
        tooltip: {
          backgroundColor: COLORS.panel,
          borderColor: color,
          borderWidth: 1,
          titleFont: { family: "'Orbitron', monospace", size: 11 },
          bodyFont: { family: "'Share Tech Mono', monospace", size: 12 },
          padding: 12,
          displayColors: false,
          callbacks: {
            title: function(context) {
              return new Date(context[0].parsed.x).toLocaleDateString('en-US', {
                month: 'short', day: 'numeric', year: 'numeric'
              });
            },
            label: function(context) {
              return formatFn(context.raw);
            }
          }
        }
      },
      scales: {
        x: {
          type: 'time',
          time: {
            unit: options.timeUnit || 'month',
            displayFormats: { month: 'MMM yyyy', week: 'MMM d', day: 'MMM d' }
          },
          grid: { color: COLORS.border, drawBorder: false },
          ticks: { maxTicksLimit: options.maxXTicks || 6 }
        },
        y: {
          grid: { color: COLORS.border, drawBorder: false },
          ticks: {
            callback: function(value) { return formatFn(value); },
            maxTicksLimit: options.maxYTicks || 5
          },
          ...(options.yMin !== undefined && { min: options.yMin })
        }
      }
    }
  };

  return new Chart(ctx, config);
}

/**
 * Create dual-axis overlay chart (hashrate + price)
 */
function createOverlayChart(canvasId, hashrateData, priceData) {
  const canvas = document.getElementById(canvasId);
  if (!canvas) {
    console.warn(`Canvas #${canvasId} not found`);
    return null;
  }

  const ctx = canvas.getContext('2d');

  const gradientCyan = ctx.createLinearGradient(0, 0, 0, 280);
  gradientCyan.addColorStop(0, COLORS.cyan + '25');
  gradientCyan.addColorStop(1, COLORS.cyan + '00');

  const gradientAmber = ctx.createLinearGradient(0, 0, 0, 280);
  gradientAmber.addColorStop(0, COLORS.amber + '25');
  gradientAmber.addColorStop(1, COLORS.amber + '00');

  return new Chart(ctx, {
    type: 'line',
    data: {
      labels: hashrateData.map(d => new Date(d.x * 1000)),
      datasets: [
        {
          label: 'Hashrate',
          data: hashrateData.map(d => d.y),
          borderColor: COLORS.cyan,
          backgroundColor: gradientCyan,
          borderWidth: 2,
          fill: true,
          tension: 0.3,
          pointRadius: 0,
          pointHoverRadius: 4,
          yAxisID: 'yHashrate'
        },
        {
          label: 'Price',
          data: priceData.map(d => d.y),
          borderColor: COLORS.amber,
          backgroundColor: gradientAmber,
          borderWidth: 2,
          fill: true,
          tension: 0.3,
          pointRadius: 0,
          pointHoverRadius: 4,
          yAxisID: 'yPrice'
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      interaction: { intersect: false, mode: 'index' },
      plugins: {
        legend: {
          display: true,
          position: 'top',
          align: 'end',
          labels: {
            color: COLORS.muted,
            font: { family: "'Share Tech Mono', monospace", size: 11 },
            boxWidth: 12,
            padding: 15,
            usePointStyle: true
          }
        },
        tooltip: {
          backgroundColor: COLORS.panel,
          borderColor: COLORS.muted,
          borderWidth: 1,
          titleFont: { family: "'Orbitron', monospace", size: 11 },
          bodyFont: { family: "'Share Tech Mono', monospace", size: 12 },
          padding: 12,
          callbacks: {
            title: function(context) {
              return new Date(context[0].parsed.x).toLocaleDateString('en-US', {
                month: 'short', day: 'numeric', year: 'numeric'
              });
            },
            label: function(context) {
              if (context.datasetIndex === 0) return 'Hashrate: ' + formatHashrate(context.raw);
              return 'Price: ' + formatPrice(context.raw);
            }
          }
        }
      },
      scales: {
        x: {
          type: 'time',
          time: { unit: 'month', displayFormats: { month: 'MMM yyyy' } },
          grid: { color: COLORS.border, drawBorder: false },
          ticks: { maxTicksLimit: 6 }
        },
        yHashrate: {
          position: 'left',
          grid: { color: COLORS.border, drawBorder: false },
          ticks: {
            callback: function(val) { return formatHashrate(val); },
            maxTicksLimit: 5,
            color: COLORS.cyan + 'aa'
          }
        },
        yPrice: {
          position: 'right',
          grid: { drawOnChartArea: false, drawBorder: false },
          ticks: {
            callback: function(val) { return formatPrice(val); },
            maxTicksLimit: 5,
            color: COLORS.amber + 'aa'
          }
        }
      }
    }
  });
}

/**
 * Create bar chart for difficulty adjustments with color-coded bars
 */
function createAdjustmentsChart(canvasId, data) {
  const canvas = document.getElementById(canvasId);
  if (!canvas) {
    console.warn(`Canvas #${canvasId} not found`);
    return null;
  }

  const ctx = canvas.getContext('2d');

  // Color bars green for positive, red for negative
  const barColors = data.map(d => d.y >= 0 ? COLORS.green + 'cc' : COLORS.red + 'cc');
  const borderColors = data.map(d => d.y >= 0 ? COLORS.green : COLORS.red);

  return new Chart(ctx, {
    type: 'bar',
    data: {
      labels: data.map(d => new Date(d.x * 1000)),
      datasets: [{
        label: 'Difficulty Change',
        data: data.map(d => d.y),
        backgroundColor: barColors,
        borderColor: borderColors,
        borderWidth: 1,
        barPercentage: 0.7
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      interaction: { intersect: false, mode: 'index' },
      plugins: {
        legend: { display: false },
        tooltip: {
          backgroundColor: COLORS.panel,
          borderColor: COLORS.green,
          borderWidth: 1,
          titleFont: { family: "'Orbitron', monospace", size: 11 },
          bodyFont: { family: "'Share Tech Mono', monospace", size: 12 },
          padding: 12,
          displayColors: false,
          callbacks: {
            title: function(context) {
              return new Date(context[0].parsed.x).toLocaleDateString('en-US', {
                month: 'short', day: 'numeric', year: 'numeric'
              });
            },
            label: function(context) {
              return formatPercent(context.raw);
            }
          }
        }
      },
      scales: {
        x: {
          type: 'time',
          time: { unit: 'month', displayFormats: { month: 'MMM yyyy' } },
          grid: { color: COLORS.border, drawBorder: false },
          ticks: { maxTicksLimit: 6 }
        },
        y: {
          grid: { color: COLORS.border, drawBorder: false },
          ticks: {
            callback: function(val) { return formatPercent(val); },
            maxTicksLimit: 5
          }
        }
      }
    }
  });
}


/* ================================================================
   SECTION 4: CHART UPDATE / TIME RANGE FILTERING
   ================================================================ */

/**
 * Update a standard chart with filtered time range
 */
function updateChartRange(chartType, days) {
  const store = chartData[chartType];
  if (!store || !store.full.length || !store.chart) return;

  let filtered = filterByDays(store.full, days);

  // Apply smoothing per chart type
  if (chartType === 'hashrate')  filtered = smoothData(filtered, 7);
  if (chartType === 'price')     filtered = smoothData(filtered, 3);
  if (chartType === 'mempool')   filtered = smoothData(filtered, 3);
  if (chartType === 'blocktime') filtered = smoothData(filtered, 3);
  if (chartType === 'fees')      filtered = smoothData(filtered, 3);
  if (chartType === 'revenue')   filtered = smoothData(filtered, 3);
  if (chartType === 'hashprice') filtered = smoothData(filtered, 7);

  store.chart.data.labels = filtered.map(d => new Date(d.x * 1000));
  store.chart.data.datasets[0].data = filtered.map(d => d.y);
  store.chart.update('none');
}

/**
 * Update overlay chart (hashrate vs price) with time range
 */
function updateOverlayRange(days) {
  const chart = chartData.overlay.chart;
  if (!chart) return;

  const hData = smoothData(filterByDays(chartData.hashrate.full, days), 7);
  const pData = smoothData(filterByDays(chartData.price.full, days), 3);

  // Use hashrate timestamps as primary
  chart.data.labels = hData.map(d => new Date(d.x * 1000));
  chart.data.datasets[0].data = hData.map(d => d.y);
  chart.data.datasets[1].data = pData.map(d => d.y);
  chart.update('none');
}

/**
 * Update difficulty adjustments bar chart with time range
 */
function updateAdjustmentsRange(days) {
  const store = chartData.adjustments;
  if (!store.full.length || !store.chart) return;

  const filtered = filterByDays(store.full, days);

  // Recalculate bar colors
  const barColors = filtered.map(d => d.y >= 0 ? COLORS.green + 'cc' : COLORS.red + 'cc');
  const borderColors = filtered.map(d => d.y >= 0 ? COLORS.green : COLORS.red);

  store.chart.data.labels = filtered.map(d => new Date(d.x * 1000));
  store.chart.data.datasets[0].data = filtered.map(d => d.y);
  store.chart.data.datasets[0].backgroundColor = barColors;
  store.chart.data.datasets[0].borderColor = borderColors;
  store.chart.update('none');
}


/* ================================================================
   SECTION 5: API FETCH FUNCTIONS
   ================================================================ */

/**
 * Fetch data from Blockchain.com Charts API
 * @param {string} chartName - Key in chartData
 * @param {string} endpoint - Blockchain.com chart endpoint name
 * @param {string} timespan - e.g. '1year', '2years'
 * @returns {Array|null} - Array of {x, y} objects
 */
async function fetchBlockchainData(chartName, endpoint, timespan = '1year') {
  const loadingEl = document.getElementById(`${chartName}-loading`);

  try {
    const url = `https://api.blockchain.info/charts/${endpoint}?timespan=${timespan}&format=json&cors=true`;
    const response = await fetch(url);

    if (!response.ok) throw new Error(`Blockchain API ${endpoint} returned ${response.status}`);

    const data = await response.json();
    chartData[chartName].full = data.values;

    if (loadingEl) loadingEl.style.display = 'none';
    return data.values;

  } catch (error) {
    console.error(`Error fetching ${chartName} (${endpoint}):`, error);
    showFetchError(loadingEl);
    return null;
  }
}

/**
 * Fetch BTC price history from CoinGecko
 * @param {number} days - Number of days of history
 * @returns {Array|null} - Array of {x, y} with x in Unix seconds
 */
async function fetchPriceData(days = 365) {
  const loadingEl = document.getElementById('price-loading');

  try {
    const url = `https://api.coingecko.com/api/v3/coins/bitcoin/market_chart?vs_currency=usd&days=${days}`;
    const response = await fetch(url);

    if (!response.ok) throw new Error(`CoinGecko returned ${response.status}`);

    const data = await response.json();

    // Convert from [timestamp_ms, price] to {x: unix_seconds, y: price}
    const formatted = data.prices.map(p => ({
      x: p[0] / 1000,
      y: p[1]
    }));

    chartData.price.full = formatted;

    if (loadingEl) loadingEl.style.display = 'none';
    return formatted;

  } catch (error) {
    console.error('Error fetching price:', error);
    showFetchError(loadingEl);
    return null;
  }
}

/**
 * Show connection error in a loading overlay
 */
function showFetchError(loadingEl) {
  if (loadingEl) {
    loadingEl.innerHTML = `
      <div class="error-message">
        <p>[ CONNECTION FAILED ]</p>
        <p style="margin-top: 10px; font-size: 0.7rem;">Unable to establish link to data source</p>
      </div>
    `;
  }
}


/* ================================================================
   SECTION 6: STATS DISPLAY UPDATES
   ================================================================ */

/**
 * Safely set text content of an element by ID
 */
function setText(id, text) {
  const el = document.getElementById(id);
  if (el) el.textContent = text;
}

/**
 * Set text and add color class based on positive/negative
 */
function setChangeText(id, value) {
  const el = document.getElementById(id);
  if (!el) return;
  el.textContent = formatPercent(value);
  el.className = 'stat-value ' + (value >= 0 ? 'green' : 'red');
}

/**
 * Update stats bar beneath each chart
 */
function updateStats(type, data) {
  if (!data || !data.length) return;

  const current = data[data.length - 1].y;
  const thirtyDaysAgo = data.find(d => d.x >= (Date.now() / 1000) - (30 * 86400))?.y || data[0].y;
  const change30d = calcChange(current, thirtyDaysAgo);
  const ath = Math.max(...data.map(d => d.y));
  const atl = Math.min(...data.map(d => d.y));

  switch (type) {
    case 'hashrate':
      setText('hashrate-current', formatHashrate(current));
      setChangeText('hashrate-change', change30d);
      setText('hashrate-ath', formatHashrate(ath));
      break;

    case 'difficulty':
      setText('difficulty-current', formatDifficulty(current));
      // Calculate estimated next adjustment from recent trend
      updateDifficultyEstimates(data);
      break;

    case 'price':
      setText('price-current', formatPrice(current));
      setChangeText('price-change', change30d);
      setText('price-ath', formatPrice(ath));
      break;

    case 'overlay':
      // Overlay uses correlation stat
      if (chartData.hashrate.full.length && chartData.price.full.length) {
        const hChange = calcChange(
          chartData.hashrate.full[chartData.hashrate.full.length - 1].y,
          chartData.hashrate.full.find(d => d.x >= (Date.now() / 1000) - (30 * 86400))?.y || chartData.hashrate.full[0].y
        );
        const pChange = calcChange(
          chartData.price.full[chartData.price.full.length - 1].y,
          chartData.price.full.find(d => d.x >= (Date.now() / 1000) - (30 * 86400))?.y || chartData.price.full[0].y
        );
        setText('overlay-hashrate', formatHashrate(chartData.hashrate.full[chartData.hashrate.full.length - 1].y));
        setText('overlay-price', formatPrice(chartData.price.full[chartData.price.full.length - 1].y));
        // Simple correlation indicator
        const sameDirection = (hChange >= 0 && pChange >= 0) || (hChange < 0 && pChange < 0);
        setText('overlay-correlation', sameDirection ? 'ALIGNED' : 'DIVERGING');
        const corrEl = document.getElementById('overlay-correlation');
        if (corrEl) corrEl.className = 'stat-value ' + (sameDirection ? 'green' : 'amber');
      }
      break;

    case 'adjustments':
      if (data.length > 0) {
        const lastAdj = data[data.length - 1];
        setText('adj-last', formatPercent(lastAdj.y));
        const lastEl = document.getElementById('adj-last');
        if (lastEl) lastEl.className = 'stat-value ' + (lastAdj.y >= 0 ? 'green' : 'red');

        const positives = data.filter(d => d.y > 0).length;
        const total = data.length;
        setText('adj-positive', `${positives}/${total}`);

        const avg = data.reduce((sum, d) => sum + d.y, 0) / data.length;
        setText('adj-avg', formatPercent(avg));
      }
      break;

    case 'mempool':
      setText('mempool-current', formatBytes(current));
      setChangeText('mempool-change', change30d);
      setText('mempool-peak', formatBytes(ath));
      break;

    case 'blocktime':
      setText('blocktime-current', formatMinutes(current));
      setText('blocktime-target', '10.0 min');
      const deviation = ((current - 10) / 10) * 100;
      setText('blocktime-deviation', formatPercent(deviation));
      const devEl = document.getElementById('blocktime-deviation');
      if (devEl) devEl.className = 'stat-value ' + (Math.abs(deviation) < 5 ? 'green' : 'amber');
      break;

    case 'fees':
      setText('fees-current', formatPriceDecimal(current));
      setChangeText('fees-change', change30d);
      setText('fees-peak', formatPriceDecimal(ath));
      break;

    case 'revenue':
      setText('revenue-current', formatPrice(current));
      setChangeText('revenue-change', change30d);
      setText('revenue-avg', formatPrice(data.reduce((s, d) => s + d.y, 0) / data.length));
      break;

    case 'hashprice':
      setText('hashprice-current', formatHashprice(current));
      setChangeText('hashprice-change', change30d);
      setText('hashprice-low', formatHashprice(atl));
      break;
  }
}

/**
 * Estimate next difficulty adjustment and time remaining
 */
function updateDifficultyEstimates(diffData) {
  if (!diffData || diffData.length < 2) return;

  // Find the last two distinct difficulty values to calculate recency
  let lastChangeIndex = diffData.length - 1;
  const currentDiff = diffData[lastChangeIndex].y;

  // Walk backwards to find when difficulty last changed
  for (let i = diffData.length - 2; i >= 0; i--) {
    if (diffData[i].y !== currentDiff) {
      lastChangeIndex = i + 1;
      break;
    }
  }

  const lastChangeTime = diffData[lastChangeIndex].x;
  const daysSinceChange = (Date.now() / 1000 - lastChangeTime) / 86400;
  const daysRemaining = Math.max(0, 14 - daysSinceChange);

  setText('difficulty-next', daysRemaining < 1 ? 'IMMINENT' : `~${Math.round(daysRemaining)} days`);

  // Estimate change based on hashrate trend (if available)
  if (chartData.hashrate.full.length > 0) {
    const hrData = chartData.hashrate.full;
    const recentHR = hrData[hrData.length - 1].y;
    const twoWeeksAgoHR = hrData.find(d => d.x >= (Date.now() / 1000) - (14 * 86400))?.y || hrData[0].y;
    const hrChange = calcChange(recentHR, twoWeeksAgoHR);
    setText('difficulty-est', formatPercent(hrChange));
    const estEl = document.getElementById('difficulty-est');
    if (estEl) estEl.className = 'stat-value ' + (hrChange >= 0 ? 'amber' : 'green');
  }
}


/* ================================================================
   SECTION 7: HALVING COUNTDOWN
   ================================================================ */

/**
 * Calculate and display halving countdown
 * Next halving: Block 1,050,000 (after April 2024 halving at 840,000)
 * ~210,000 blocks between halvings
 * Average block time: ~10 minutes
 */
async function initHalvingCountdown() {
  const loadingEl = document.getElementById('halving-loading');

  try {
    // Fetch current block height from Blockchain.com
    const response = await fetch('https://api.blockchain.info/q/getblockcount?cors=true');
    if (!response.ok) throw new Error('Failed to fetch block height');

    const currentBlock = await response.json();
    const nextHalvingBlock = 1050000;
    const blocksRemaining = nextHalvingBlock - currentBlock;
    const totalBlocksInEpoch = 210000;
    const blocksSinceHalving = currentBlock - 840000; // Since April 2024 halving

    // Estimate time remaining (avg 10 min per block)
    const minutesRemaining = blocksRemaining * 10;
    const estimatedDate = new Date(Date.now() + minutesRemaining * 60 * 1000);

    // Calculate days, hours, minutes
    const days = Math.floor(minutesRemaining / 1440);
    const hours = Math.floor((minutesRemaining % 1440) / 60);
    const mins = Math.floor(minutesRemaining % 60);

    // Update countdown display
    setText('countdown-days', String(days).padStart(3, '0'));
    setText('countdown-hours', String(hours).padStart(2, '0'));
    setText('countdown-minutes', String(mins).padStart(2, '0'));

    // Update stats
    setText('halving-block', formatNumber(nextHalvingBlock));
    setText('halving-current', formatNumber(currentBlock));
    setText('halving-remaining', formatNumber(blocksRemaining));
    setText('halving-estimate', estimatedDate.toLocaleDateString('en-US', {
      month: 'short', year: 'numeric'
    }));

    // Progress bar
    const progress = (blocksSinceHalving / totalBlocksInEpoch) * 100;
    const progressBar = document.getElementById('halving-progress-fill');
    if (progressBar) {
      progressBar.style.width = Math.min(progress, 100).toFixed(1) + '%';
    }
    setText('halving-progress-text', progress.toFixed(1) + '% through current epoch');

    // Reward info
    setText('halving-reward-current', '3.125 BTC');
    setText('halving-reward-next', '1.5625 BTC');

    if (loadingEl) loadingEl.style.display = 'none';

  } catch (error) {
    console.error('Error fetching halving data:', error);
    showFetchError(loadingEl);
  }
}


/* ================================================================
   SECTION 8: BOOT SEQUENCE ANIMATION
   ================================================================ */

/**
 * Run the Boot sequence animation
 * Fills progress bar and cycles through boot messages
 */
function runBootSequence() {
  return new Promise((resolve) => {
    const overlay = document.getElementById('boot-overlay');
    const progressFill = document.getElementById('boot-progress-fill');
    const bootText = document.getElementById('boot-text');

    if (!overlay) {
      resolve();
      return;
    }

    let progress = 0;
    let messageIndex = 0;

    const interval = setInterval(() => {
      progress += Math.random() * 8 + 2; // Random increments for realism
      if (progress > 100) progress = 100;

      if (progressFill) progressFill.style.width = progress + '%';

      // Cycle boot messages
      if (progress > (messageIndex + 1) * (100 / BOOT_MESSAGES.length)) {
        messageIndex = Math.min(messageIndex + 1, BOOT_MESSAGES.length - 1);
        if (bootText) bootText.textContent = BOOT_MESSAGES[messageIndex];
      }

      if (progress >= 100) {
        clearInterval(interval);
        // Fade out boot screen
        setTimeout(() => {
          overlay.style.opacity = '0';
          overlay.style.transition = 'opacity 0.8s ease';
          setTimeout(() => {
            overlay.style.display = 'none';
            resolve();
          }, 800);
        }, 400);
      }
    }, 120);
  });
}


/* ================================================================
   SECTION 9: DATA REFRESH
   ================================================================ */

/**
 * Refresh all data and update charts
 */
async function refreshAllData() {
  const refreshBtn = document.querySelector('.refresh-btn');
  if (refreshBtn) {
    refreshBtn.disabled = true;
    refreshBtn.textContent = 'REFRESHING...';
  }

  try {
    await loadAllData();
    updateRefreshTimestamp();
  } catch (error) {
    console.error('Refresh error:', error);
  } finally {
    if (refreshBtn) {
      refreshBtn.disabled = false;
      refreshBtn.textContent = 'REFRESH DATA';
    }
  }
}

/**
 * Update the last-refreshed timestamp display
 */
function updateRefreshTimestamp() {
  const timestampEl = document.querySelector('.refresh-timestamp');
  if (timestampEl) {
    const now = new Date();
    timestampEl.textContent = 'Last sync: ' + now.toLocaleTimeString('en-US', {
      hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false
    });
  }
}


/* ================================================================
   SECTION 10: MASTER DATA LOADER
   ================================================================ */

/**
 * Load all data from APIs and build/update all charts
 */
async function loadAllData() {
  // \u2500\u2500 Wave 1: Core data (hashrate, difficulty, price) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500
  // These are needed by other charts (overlay, hashprice)
  const [hashrateData, difficultyData, priceData] = await Promise.all([
    fetchBlockchainData('hashrate', 'hash-rate'),
    fetchBlockchainData('difficulty', 'difficulty'),
    fetchPriceData()
  ]);

  // \u2500\u2500 Wave 2: Secondary data (mempool, blocktime, fees, revenue) \u2500\u2500
  const [mempoolData, blocktimeData, feesData, revenueData] = await Promise.all([
    fetchBlockchainData('mempool', 'mempool-size'),
    fetchBlockchainData('blocktime', 'median-confirmation-time'),
    fetchBlockchainData('fees', 'transaction-fees-usd'),
    fetchBlockchainData('revenue', 'miners-revenue')
  ]);

  // \u2500\u2500 Build Charts \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500

  // 1. Hashrate
  if (hashrateData) {
    destroyChart('hashrate');
    const smoothed = smoothData(hashrateData, 7);
    chartData.hashrate.chart = createChart('hashrate-chart', smoothed, 'Hashrate', COLORS.cyan, formatHashrate);
    updateStats('hashrate', hashrateData);
  }

  // 2. Difficulty
  if (difficultyData) {
    destroyChart('difficulty');
    chartData.difficulty.chart = createChart('difficulty-chart', difficultyData, 'Difficulty', COLORS.green, formatDifficulty);
    updateStats('difficulty', difficultyData);
  }

  // 3. Price
  if (priceData) {
    destroyChart('price');
    const smoothed = smoothData(priceData, 3);
    chartData.price.chart = createChart('price-chart', smoothed, 'Price', COLORS.amber, formatPrice);
    updateStats('price', priceData);
  }

  // 4. Hashrate vs Price Overlay
  if (hashrateData && priceData) {
    if (chartData.overlay.chart) chartData.overlay.chart.destroy();
    const hSmoothed = smoothData(hashrateData, 7);
    const pSmoothed = smoothData(priceData, 3);
    chartData.overlay.chart = createOverlayChart('overlay-chart', hSmoothed, pSmoothed);
    updateStats('overlay', null);
    const overlayLoading = document.getElementById('overlay-loading');
    if (overlayLoading) overlayLoading.style.display = 'none';
  }

  // 5. Difficulty Adjustments
  if (difficultyData) {
    destroyChart('adjustments');
    const adjustments = calcDifficultyAdjustments(difficultyData);
    chartData.adjustments.full = adjustments;
    chartData.adjustments.chart = createAdjustmentsChart('adjustments-chart', adjustments);
    updateStats('adjustments', adjustments);
    const adjLoading = document.getElementById('adjustments-loading');
    if (adjLoading) adjLoading.style.display = 'none';
  }

  // 6. Mempool
  if (mempoolData) {
    destroyChart('mempool');
    const smoothed = smoothData(mempoolData, 3);
    chartData.mempool.chart = createChart('mempool-chart', smoothed, 'Mempool Size', COLORS.sand, formatBytes);
    updateStats('mempool', mempoolData);
  }

  // 7. Block Time
  if (blocktimeData) {
    destroyChart('blocktime');
    const smoothed = smoothData(blocktimeData, 3);
    chartData.blocktime.chart = createChart('blocktime-chart', smoothed, 'Block Time', COLORS.cyan, formatMinutes, {
      yMin: 0
    });
    updateStats('blocktime', blocktimeData);
  }

  // 8. Transaction Fees
  if (feesData) {
    destroyChart('fees');
    // Convert total daily fees to average fee per transaction
    // We'll keep it as total daily fees in USD for clarity
    const smoothed = smoothData(feesData, 3);
    chartData.fees.chart = createChart('fees-chart', smoothed, 'Daily Fees (USD)', COLORS.amber, formatPrice);
    updateStats('fees', feesData);
  }

  // 9. Miner Revenue (USD from Blockchain.com)
  if (revenueData) {
    destroyChart('revenue');
    const smoothed = smoothData(revenueData, 3);
    chartData.revenue.chart = createChart('revenue-chart', smoothed, 'Miner Revenue (USD)', COLORS.green, formatPrice);
    updateStats('revenue', revenueData);
  }

  // 10. Hashprice
  if (revenueData && priceData && hashrateData) {
    destroyChart('hashprice');
    // Calculate hashprice from miner revenue (USD), and network hashrate
    // hashprice = daily_revenue_usd / network_hashrate_TH
    const hashpriceValues = [];
    const hrLookup = {};
    hashrateData.forEach(h => {
      hrLookup[Math.floor(h.x / 86400)] = h.y;
    });

    revenueData.forEach(r => {
      const dayKey = Math.floor(r.x / 86400);
      const hr = hrLookup[dayKey];
      if (hr && hr > 0) {
        // Revenue is in USD (from miners-revenue endpoint)
        // Hashrate from API is in GH/s. Convert to TH/s: GH/s / 1000
        const hashrateTH = hr / 1000;
        const hp = r.y / hashrateTH;
        if (isFinite(hp) && hp > 0) {
          hashpriceValues.push({ x: r.x, y: hp });
        }
      }
    });

    chartData.hashprice.full = hashpriceValues;
    const smoothed = smoothData(hashpriceValues, 7);
    chartData.hashprice.chart = createChart('hashprice-chart', smoothed, 'Hashprice', COLORS.red, formatHashprice);
    updateStats('hashprice', hashpriceValues);
    const hpLoading = document.getElementById('hashprice-loading');
    if (hpLoading) hpLoading.style.display = 'none';
  }

  // 11. Halving Countdown (non-chart panel)
  await initHalvingCountdown();

  // Update refresh timestamp
  updateRefreshTimestamp();
}

/**
 * Safely destroy a chart before rebuilding
 */
function destroyChart(name) {
  if (chartData[name] && chartData[name].chart) {
    chartData[name].chart.destroy();
    chartData[name].chart = null;
  }
}


/* ================================================================
   SECTION 11: EVENT LISTENERS
   ================================================================ */

/**
 * Set up time range toggle buttons for all charts
 */
function initTimeButtons() {
  document.querySelectorAll('.time-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      const chartName = this.dataset.chart;
      const range = parseInt(this.dataset.range);

      // Update active state within this group
      this.parentElement.querySelectorAll('.time-btn').forEach(b => b.classList.remove('active'));
      this.classList.add('active');

      // Route to correct update function
      if (chartName === 'overlay') {
        updateOverlayRange(range);
      } else if (chartName === 'adjustments') {
        updateAdjustmentsRange(range);
      } else {
        updateChartRange(chartName, range);
      }
    });
  });
}

/**
 * Set up refresh button
 */
function initRefreshButton() {
  const refreshBtn = document.querySelector('.refresh-btn');
  if (refreshBtn) {
    refreshBtn.addEventListener('click', refreshAllData);
  }
}


/* ================================================================
   SECTION 12: INITIALIZATION
   ================================================================ */

/**
 * Master init \u2014 runs on page load
 * 1. Boot sequence animation
 * 2. Load all data
 * 3. Set up event listeners
 */
async function init() {
  // Run boot sequence first
  await runBootSequence();

  // Load all chart data
  await loadAllData();

  // Set up interactions
  initTimeButtons();
  initRefreshButton();
}

// \u2500\u2500\u2500 START \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500
document.addEventListener('DOMContentLoaded', init);

</script>



<!-- Shared Glossary System -->
<script src="/scripts/glossary-data.js"></script>
<script src="/scripts/glossary-drawer.js"></script>

<!-- ============================================ -->
<!-- SOLA FEEDBACK POPUP WIDGET &#x2014; Temporary feature -->
<!-- Remove this entire block when feedback window closes -->
<!-- ============================================ -->
<div id="sola-feedback-widget" style="display:none;">
  <!-- Small trigger bubble (bottom-right) -->
  <div id="sola-fb-bubble" style="position:fixed;bottom:20px;right:20px;z-index:9999;cursor:pointer;">
    <p style="color:var(--sola-gold, #D4AF37);font-size:14px;font-weight:700;text-align:center;margin-bottom:6px;font-family:'Roboto',sans-serif;">Hey! Got a second?</p>
    <video id="sola-fb-video" width="200" height="113" muted playsinline loop style="border-radius:8px;border:2px solid var(--sola-gold, #D4AF37);box-shadow:0 4px 20px rgba(0,0,0,0.5);"
      src="assets/sola_feedback.mp4"></video>
    <div style="display:flex;gap:8px;margin-top:6px;justify-content:center;">
      <button id="sola-fb-yes" style="padding:6px 18px;border-radius:8px;border:1px solid var(--sola-gold, #D4AF37);background:var(--sola-emerald, #0B2F26);color:var(--sola-gold, #D4AF37);font-family:'Roboto',sans-serif;font-size:13px;font-weight:700;cursor:pointer;transition:all 0.2s;">Sure!</button>
      <button id="sola-fb-no" style="padding:6px 18px;border-radius:8px;border:1px solid var(--text-muted, #5a6a7a);background:transparent;color:var(--text-secondary, #8899a8);font-family:'Roboto',sans-serif;font-size:13px;cursor:pointer;transition:all 0.2s;">Not now</button>
    </div>
  </div>

  <!-- Wizard overlay -->
  <div id="sola-fb-wizard" style="display:none;position:fixed;bottom:20px;right:20px;z-index:10000;width:320px;background:var(--bg-card, #22303f);border:1px solid var(--sola-gold, #D4AF37);border-radius:12px;box-shadow:0 8px 32px rgba(0,0,0,0.6);font-family:'Roboto',sans-serif;overflow:hidden;">
    <!-- Header -->
    <div style="background:var(--sola-emerald, #0B2F26);padding:12px 16px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid var(--sola-gold, #D4AF37);">
      <span style="color:var(--sola-gold, #D4AF37);font-weight:700;font-size:14px;">Sola Ray &#x2014; Feedback</span>
      <button id="sola-fb-close" style="background:none;border:none;color:var(--text-secondary, #8899a8);font-size:18px;cursor:pointer;padding:0 4px;line-height:1;">&times;</button>
    </div>
    <!-- Privacy note -->
    <div style="padding:8px 16px;background:var(--bg-secondary, #1a2836);font-size:11px;color:var(--text-muted, #5a6a7a);line-height:1.4;">
      Your email is used only for direct communication with Sola Ray Effect. It will never be sold, shared, or added to any mailing list.
    </div>
    <!-- Steps container -->
    <div id="sola-fb-steps" style="padding:16px;">
      <!-- Step 1: How did you find us -->
      <div class="sola-fb-step" data-step="1">
        <p style="color:var(--text-primary, #e8f0f7);font-size:14px;margin-bottom:12px;font-weight:700;">How did you find Sola Ray Effect?</p>
        <select id="sola-fb-source" style="width:100%;padding:10px;border-radius:8px;border:1px solid var(--border-color, rgba(0,206,209,0.4));background:var(--bg-secondary, #1a2836);color:var(--text-primary, #e8f0f7);font-size:14px;font-family:'Roboto',sans-serif;">
          <option value="">Select one...</option>
          <option value="Google Search">Google Search</option>
          <option value="YouTube">YouTube</option>
          <option value="Reddit">Reddit</option>
          <option value="Twitter/X">Twitter / X</option>
          <option value="Facebook">Facebook</option>
          <option value="A Friend">A Friend</option>
          <option value="Mining Forum">Mining Forum</option>
          <option value="Other">Other</option>
        </select>
        <button class="sola-fb-next" data-next="2" style="margin-top:12px;width:100%;padding:10px;border-radius:8px;border:none;background:var(--sola-gold, #D4AF37);color:var(--sola-emerald, #0B2F26);font-weight:700;font-size:14px;cursor:pointer;font-family:'Roboto',sans-serif;">Next</button>
      </div>
      <!-- Step 2: What brought you here -->
      <div class="sola-fb-step" data-step="2" style="display:none;">
        <p style="color:var(--text-primary, #e8f0f7);font-size:14px;margin-bottom:12px;font-weight:700;">What brought you to the site?</p>
        <textarea id="sola-fb-reason" rows="3" placeholder="What were you looking for?" style="width:100%;padding:10px;border-radius:8px;border:1px solid var(--border-color, rgba(0,206,209,0.4));background:var(--bg-secondary, #1a2836);color:var(--text-primary, #e8f0f7);font-size:14px;font-family:'Roboto',sans-serif;resize:vertical;"></textarea>
        <div style="display:flex;gap:8px;margin-top:12px;">
          <button class="sola-fb-back" data-back="1" style="flex:1;padding:10px;border-radius:8px;border:1px solid var(--text-muted, #5a6a7a);background:transparent;color:var(--text-secondary, #8899a8);font-size:14px;cursor:pointer;font-family:'Roboto',sans-serif;">Back</button>
          <button class="sola-fb-next" data-next="3" style="flex:2;padding:10px;border-radius:8px;border:none;background:var(--sola-gold, #D4AF37);color:var(--sola-emerald, #0B2F26);font-weight:700;font-size:14px;cursor:pointer;font-family:'Roboto',sans-serif;">Next</button>
        </div>
      </div>
      <!-- Step 3: Feedback -->
      <div class="sola-fb-step" data-step="3" style="display:none;">
        <p style="color:var(--text-primary, #e8f0f7);font-size:14px;margin-bottom:12px;font-weight:700;">What's your favorite thing about Sola Ray Effect?</p>
        <textarea id="sola-fb-message" rows="4" placeholder="What do you like most about the site?" style="width:100%;padding:10px;border-radius:8px;border:1px solid var(--border-color, rgba(0,206,209,0.4));background:var(--bg-secondary, #1a2836);color:var(--text-primary, #e8f0f7);font-size:14px;font-family:'Roboto',sans-serif;resize:vertical;"></textarea>
        <div style="display:flex;gap:8px;margin-top:12px;">
          <button class="sola-fb-back" data-back="2" style="flex:1;padding:10px;border-radius:8px;border:1px solid var(--text-muted, #5a6a7a);background:transparent;color:var(--text-secondary, #8899a8);font-size:14px;cursor:pointer;font-family:'Roboto',sans-serif;">Back</button>
          <button class="sola-fb-next" data-next="4" style="flex:2;padding:10px;border-radius:8px;border:none;background:var(--sola-gold, #D4AF37);color:var(--sola-emerald, #0B2F26);font-weight:700;font-size:14px;cursor:pointer;font-family:'Roboto',sans-serif;">Next</button>
        </div>
      </div>
      <!-- Step 4: Coin/miner request -->
      <div class="sola-fb-step" data-step="4" style="display:none;">
        <p style="color:var(--text-primary, #e8f0f7);font-size:14px;margin-bottom:12px;font-weight:700;">Any coins, miners, or features you'd like to see added?</p>
        <textarea id="sola-fb-request" rows="3" placeholder="Optional &#x2014; skip if you want" style="width:100%;padding:10px;border-radius:8px;border:1px solid var(--border-color, rgba(0,206,209,0.4));background:var(--bg-secondary, #1a2836);color:var(--text-primary, #e8f0f7);font-size:14px;font-family:'Roboto',sans-serif;resize:vertical;"></textarea>
        <div style="display:flex;gap:8px;margin-top:12px;">
          <button class="sola-fb-back" data-back="3" style="flex:1;padding:10px;border-radius:8px;border:1px solid var(--text-muted, #5a6a7a);background:transparent;color:var(--text-secondary, #8899a8);font-size:14px;cursor:pointer;font-family:'Roboto',sans-serif;">Back</button>
          <button class="sola-fb-next" data-next="5" style="flex:2;padding:10px;border-radius:8px;border:none;background:var(--sola-gold, #D4AF37);color:var(--sola-emerald, #0B2F26);font-weight:700;font-size:14px;cursor:pointer;font-family:'Roboto',sans-serif;">Next</button>
        </div>
      </div>
      <!-- Step 5: Email + Name -->
      <div class="sola-fb-step" data-step="5" style="display:none;">
        <p style="color:var(--text-primary, #e8f0f7);font-size:14px;margin-bottom:12px;font-weight:700;">Where can Sola reach you?</p>
        <input id="sola-fb-name" type="text" placeholder="Name (optional)" style="width:100%;padding:10px;border-radius:8px;border:1px solid var(--border-color, rgba(0,206,209,0.4));background:var(--bg-secondary, #1a2836);color:var(--text-primary, #e8f0f7);font-size:14px;font-family:'Roboto',sans-serif;margin-bottom:8px;">
        <input id="sola-fb-email" type="email" placeholder="Your email" style="width:100%;padding:10px;border-radius:8px;border:1px solid var(--border-color, rgba(0,206,209,0.4));background:var(--bg-secondary, #1a2836);color:var(--text-primary, #e8f0f7);font-size:14px;font-family:'Roboto',sans-serif;">
        <div style="display:flex;gap:8px;margin-top:12px;">
          <button class="sola-fb-back" data-back="4" style="flex:1;padding:10px;border-radius:8px;border:1px solid var(--text-muted, #5a6a7a);background:transparent;color:var(--text-secondary, #8899a8);font-size:14px;cursor:pointer;font-family:'Roboto',sans-serif;">Back</button>
          <button id="sola-fb-submit" style="flex:2;padding:10px;border-radius:8px;border:none;background:var(--profit, #00e676);color:var(--sola-emerald, #0B2F26);font-weight:700;font-size:14px;cursor:pointer;font-family:'Roboto',sans-serif;">Send Feedback</button>
        </div>
      </div>
      <!-- Step 6: Thank you -->
      <div class="sola-fb-step" data-step="6" style="display:none;">
        <p style="color:var(--sola-gold, #D4AF37);font-size:16px;font-weight:700;text-align:center;margin-bottom:8px;">Thanks for the feedback!</p>
        <p style="color:var(--text-secondary, #8899a8);font-size:13px;text-align:center;">Sola will respond to your email directly.</p>
      </div>
      <!-- Error state -->
      <div id="sola-fb-error" style="display:none;">
        <p style="color:var(--loss, #ff5252);font-size:13px;text-align:center;margin-top:8px;">Something went wrong. Please try again.</p>
      </div>
    </div>
    <!-- Step indicator dots -->
    <div id="sola-fb-dots" style="display:flex;justify-content:center;gap:6px;padding:0 16px 12px;">
      <span class="sola-fb-dot" style="width:8px;height:8px;border-radius:50%;background:var(--sola-gold, #D4AF37);"></span>
      <span class="sola-fb-dot" style="width:8px;height:8px;border-radius:50%;background:var(--text-muted, #5a6a7a);"></span>
      <span class="sola-fb-dot" style="width:8px;height:8px;border-radius:50%;background:var(--text-muted, #5a6a7a);"></span>
      <span class="sola-fb-dot" style="width:8px;height:8px;border-radius:50%;background:var(--text-muted, #5a6a7a);"></span>
      <span class="sola-fb-dot" style="width:8px;height:8px;border-radius:50%;background:var(--text-muted, #5a6a7a);"></span>
    </div>
  </div>
</div>

<script>
(function() {
  // Don't show if user already dismissed or submitted THIS SESSION
  if (sessionStorage.getItem('sola-fb-done')) return;

  var widget = document.getElementById('sola-feedback-widget');
  var bubble = document.getElementById('sola-fb-bubble');
  var wizard = document.getElementById('sola-fb-wizard');
  var video = document.getElementById('sola-fb-video');
  var dots = document.querySelectorAll('.sola-fb-dot');

  // Show bubble after 2 minutes
  setTimeout(function() {
    widget.style.display = 'block';
    video.play().catch(function() {});
  }, 120000);

  // Click video to unmute and replay
  video.addEventListener('click', function() {
    video.muted = false;
    video.currentTime = 0;
    video.play().catch(function() {});
  });

  // "Sure!" \u2014 open wizard
  document.getElementById('sola-fb-yes').addEventListener('click', function() {
    bubble.style.display = 'none';
    video.pause();
    video.muted = true;
    wizard.style.display = 'block';
  });

  // "Not now" \u2014 dismiss for this session
  document.getElementById('sola-fb-no').addEventListener('click', function() {
    widget.style.display = 'none';
    video.pause();
    sessionStorage.setItem('sola-fb-done', 'dismissed');
  });

  // Close wizard
  document.getElementById('sola-fb-close').addEventListener('click', function() {
    widget.style.display = 'none';
    sessionStorage.setItem('sola-fb-done', 'dismissed');
  });

  // Step navigation
  function showStep(n) {
    var steps = document.querySelectorAll('.sola-fb-step');
    for (var i = 0; i < steps.length; i++) {
      steps[i].style.display = steps[i].getAttribute('data-step') == n ? 'block' : 'none';
    }
    // Update dots
    for (var j = 0; j < dots.length; j++) {
      dots[j].style.background = (j < n && n <= 5) ? 'var(--sola-gold, #D4AF37)' : 'var(--text-muted, #5a6a7a)';
    }
    // Hide dots on thank you
    document.getElementById('sola-fb-dots').style.display = n == 6 ? 'none' : 'flex';
  }

  // Next buttons
  document.querySelectorAll('.sola-fb-next').forEach(function(btn) {
    btn.addEventListener('click', function() {
      var next = parseInt(this.getAttribute('data-next'));
      // Validate step 1: source required
      if (next == 2 && !document.getElementById('sola-fb-source').value) {
        document.getElementById('sola-fb-source').style.borderColor = 'var(--loss, #ff5252)';
        return;
      }
      // Validate step 2: reason required
      if (next == 3 && !document.getElementById('sola-fb-reason').value.trim()) {
        document.getElementById('sola-fb-reason').style.borderColor = 'var(--loss, #ff5252)';
        return;
      }
      // Validate step 3: feedback required
      if (next == 4 && !document.getElementById('sola-fb-message').value.trim()) {
        document.getElementById('sola-fb-message').style.borderColor = 'var(--loss, #ff5252)';
        return;
      }
      showStep(next);
    });
  });

  // Back buttons
  document.querySelectorAll('.sola-fb-back').forEach(function(btn) {
    btn.addEventListener('click', function() {
      showStep(parseInt(this.getAttribute('data-back')));
    });
  });

  // Reset border on input
  document.getElementById('sola-fb-source').addEventListener('change', function() {
    this.style.borderColor = '';
  });
  document.getElementById('sola-fb-reason').addEventListener('input', function() {
    this.style.borderColor = '';
  });
  document.getElementById('sola-fb-message').addEventListener('input', function() {
    this.style.borderColor = '';
  });

  // Submit
  document.getElementById('sola-fb-submit').addEventListener('click', function() {
    var email = document.getElementById('sola-fb-email').value.trim();
    if (!email) {
      document.getElementById('sola-fb-email').style.borderColor = 'var(--loss, #ff5252)';
      return;
    }
    document.getElementById('sola-fb-email').style.borderColor = '';
    var btn = this;
    btn.textContent = 'Sending...';
    btn.disabled = true;

    var data = {
      access_key: 'f66dbe16-41bf-4d02-ac67-aab832222384',
      subject: 'Sola Ray Feedback \u2014 via ' + document.getElementById('sola-fb-source').value,
      from_name: 'Sola Ray Feedback Widget',
      name: document.getElementById('sola-fb-name').value.trim() || 'Anonymous',
      email: email,
      found_us_via: document.getElementById('sola-fb-source').value,
      what_brought_you: document.getElementById('sola-fb-reason').value.trim(),
      feedback: document.getElementById('sola-fb-message').value.trim(),
      feature_request: document.getElementById('sola-fb-request').value.trim() || 'None'
    };

    fetch('https://api.web3forms.com/submit', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
      body: JSON.stringify(data)
    })
    .then(function(res) { return res.json(); })
    .then(function(result) {
      if (result.success) {
        showStep(6);
        sessionStorage.setItem('sola-fb-done', 'submitted');
        // Auto-close after 3 seconds
        setTimeout(function() { widget.style.display = 'none'; }, 3000);
      } else {
        document.getElementById('sola-fb-error').style.display = 'block';
        btn.textContent = 'Send Feedback';
        btn.disabled = false;
      }
    })
    .catch(function() {
      document.getElementById('sola-fb-error').style.display = 'block';
      btn.textContent = 'Send Feedback';
      btn.disabled = false;
    });
  });

  // Email border reset
  document.getElementById('sola-fb-email').addEventListener('input', function() {
    this.style.borderColor = '';
  });
}
</script>

  <!-- Shared Components Loader (must be after both site-nav and site-footer divs) -->
  <script src="/scripts/site-components.js"></script>
</body>
</html>
